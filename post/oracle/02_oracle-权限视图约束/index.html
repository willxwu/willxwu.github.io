<!doctype html><html lang=en><head><meta charset=utf-8><title>Oracle 权限、视图、约束</title><link href=//cdn.jsdelivr.net rel=dns-prefetch><link href=//cdnjs.cloudflare.com rel=dns-prefetch><link href=//at.alicdn.com rel=dns-prefetch><link href=//fonts.googleapis.com rel=dns-prefetch><link href=//fonts.gstatic.com rel=dns-prefetch><link href=///disqus.com rel=dns-prefetch><link href=//c.disquscdn.com rel=dns-prefetch><link href=//www.google-analytics.com rel=dns-prefetch><meta name=description content="Oracle 权限、视图、约束 一、数据库权限 1、查看用户所属角色 select * from user_role_privs; 2、查询角色权限 CONNECT：仅连接权限
select * from dba_sys_privs where grantee=&amp;#39;CONNECT&amp;#39; 查看RESOURCE权限：
select * from dba_sys_privs where grantee=&amp;#39;RESOURCE&amp;#39; DBA角色权限查看
select * from dba_sys_privs where grantee=&amp;#39;DBA&amp;#39; 3、用户授权 例如：授予scoot拥有dba的权限
grant dba to scott; 二、视图 1、创建视图 Create view 视图名称as 查询语句 create view v_emp1 as select ename,job from emp; 2、修改视图 create or replace view 始图名称 as 新的查询数据； create or replace view vemp as select empno,ename,job from EMP t; 注意与创建视图的不同：多了一个or replace"><meta name=twitter:card content="summary"><meta name=twitter:site content="@twitter_username"><meta name=twitter:title content="Oracle 权限、视图、约束"><meta name=twitter:description content="Oracle 权限、视图、约束 一、数据库权限 1、查看用户所属角色 select * from user_role_privs; 2、查询角色权限 CONNECT：仅连接权限
select * from dba_sys_privs where grantee=&amp;#39;CONNECT&amp;#39; 查看RESOURCE权限：
select * from dba_sys_privs where grantee=&amp;#39;RESOURCE&amp;#39; DBA角色权限查看
select * from dba_sys_privs where grantee=&amp;#39;DBA&amp;#39; 3、用户授权 例如：授予scoot拥有dba的权限
grant dba to scott; 二、视图 1、创建视图 Create view 视图名称as 查询语句 create view v_emp1 as select ename,job from emp; 2、修改视图 create or replace view 始图名称 as 新的查询数据； create or replace view vemp as select empno,ename,job from EMP t; 注意与创建视图的不同：多了一个or replace"><meta name=twitter:image content="/images/avatar.png"><meta property="og:type" content="article"><meta property="og:title" content="Oracle 权限、视图、约束"><meta property="og:description" content="Oracle 权限、视图、约束 一、数据库权限 1、查看用户所属角色 select * from user_role_privs; 2、查询角色权限 CONNECT：仅连接权限
select * from dba_sys_privs where grantee=&amp;#39;CONNECT&amp;#39; 查看RESOURCE权限：
select * from dba_sys_privs where grantee=&amp;#39;RESOURCE&amp;#39; DBA角色权限查看
select * from dba_sys_privs where grantee=&amp;#39;DBA&amp;#39; 3、用户授权 例如：授予scoot拥有dba的权限
grant dba to scott; 二、视图 1、创建视图 Create view 视图名称as 查询语句 create view v_emp1 as select ename,job from emp; 2、修改视图 create or replace view 始图名称 as 新的查询数据； create or replace view vemp as select empno,ename,job from EMP t; 注意与创建视图的不同：多了一个or replace"><meta property="og:url" content="https://willxwu.github.io/post/oracle/02_oracle-%E6%9D%83%E9%99%90%E8%A7%86%E5%9B%BE%E7%BA%A6%E6%9D%9F/"><meta property="og:image" content="/images/avatar.png"><link rel=canonical href=https://willxwu.github.io/post/oracle/02_oracle-%E6%9D%83%E9%99%90%E8%A7%86%E5%9B%BE%E7%BA%A6%E6%9D%9F/><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no,email=no,adress=no"><meta http-equiv=cache-control content="no-transform"><meta name=robots content="index,follow"><meta name=referrer content="origin-when-cross-origin"><meta name=theme-color content="#02b875"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=apple-mobile-web-app-title content="Come Back"><meta name=msapplication-tooltip content="Come Back"><meta name=msapplication-navbutton-color content="#02b875"><meta name=msapplication-TileColor content="#02b875"><meta name=msapplication-TileImage content="/icons/icon-144x144.png"><link rel=icon href=https://willxwu.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://willxwu.github.io/icons/icon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://willxwu.github.io/icons/icon-32x32.png><link rel=icon sizes=192x192 href=https://willxwu.github.io/icons/icon-192x192.png><link rel=apple-touch-icon href=https://willxwu.github.io/icons/icon-152x152.png><link rel=manifest href=https://willxwu.github.io/manifest.json><link rel=preload href=https://willxwu.github.io/styles/main-rendered.min.css as=style><link rel=preload href="https://fonts.googleapis.com/css?family=Lobster" as=style><link rel=preload href=https://willxwu.github.io/images/avatar.png as=image><link rel=preload href=https://willxwu.github.io/images/grey-prism.svg as=image><style>body{background:#f4f3f1 url(/images/grey-prism.svg)repeat fixed}</style><link rel=stylesheet href=https://willxwu.github.io/styles/main-rendered.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lobster"><script src=https://cdn.jsdelivr.net/npm/medium-zoom@1.0.2/dist/medium-zoom.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/video.js@7.3.0/dist/video-js.min.css><!--[if lte IE 8]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/videojs-ie8@1.1.2/dist/videojs-ie8.min.js></script><![endif]--><!--[if lte IE 9]><script src=https://cdn.jsdelivr.net/npm/eligrey-classlist-js-polyfill@1.2.20180112/classList.min.js></script><![endif]--></head><body><div class=suspension><a role=button aria-label="Go to top" title="Go to top" class="to-top is-hide"><span class="icon icon-up" aria-hidden=true></span></a>
<a role=button aria-label="Go to comments" title="Go to comments" class=to-comment href=#disqus_thread><span class="icon icon-comment" aria-hidden=true></span></a></div><header class=site-header><a href=https://willxwu.github.io><img class=avatar src=https://willxwu.github.io/images/avatar.png alt=Avatar></a><h2 class=title><a href=https://willxwu.github.io>Come Back</a></h2><p class=subtitle>All kinds of taste, are life.</p><button class=menu-toggle type=button aria-label="Main Menu" aria-expanded=false tab-index=0>
<span class="icon icon-menu" aria-hidden=true></span></button><nav class="site-menu collapsed"><h2 class=offscreen>Main Menu</h2><ul class=menu-list><li class="menu-item
is-active"><a href=https://willxwu.github.io/>Home</a></li><li class=menu-item><a href=https://willxwu.github.io/archives/>archives</a></li><li class=menu-item><a href=https://willxwu.github.io/tags/>Tags</a></li><li class=menu-item><a href=https://willxwu.github.io/links/>Links</a></li><li class=menu-item><a href=https://willxwu.github.io/resume/>resume</a></li><li class=menu-item><a href=https://willxwu.github.io/about/>About</a></li></ul></nav><nav class="social-menu collapsed"><h2 class=offscreen>Social Networks</h2><ul class=social-list><li class=social-item><a href=mailto:name@domain.com title=Email aria-label=Email><span class="icon icon-email" aria-hidden=true></span></a></li><li class=social-item><a href=//github.com/github_username rel=me title=GitHub aria-label=GitHub><span class="icon icon-github" aria-hidden=true></span></a></li><li class=social-item><a href=//twitter.com/twitter_username rel=me title=Twitter aria-label=Twitter><span class="icon icon-twitter" aria-hidden=true></span></a></li><li class=social-item><a href=//weibo.com/weibo_username rel=me title=Weibo aria-label=Weibo><span class="icon icon-weibo" aria-hidden=true></span></a></li><li class=social-item><a href=https://willxwu.github.io/images/qrcode.jpg rel=me title=Wechat aria-label=Wechat><span class="icon icon-wechat" aria-hidden=true></span></a></li><li class=social-item><a href=//www.linkedin.com/in/linkedin_username rel=me title=LinkedIn aria-label=LinkedIn><span class="icon icon-linkedin" aria-hidden=true></span></a></li></ul></nav></header><section class="main post-detail"><header class=post-header><h1 class=post-title>Oracle 权限、视图、约束</h1><p class=post-meta>@Come Back · Apr 22, 2022 · 1 min read</p></header><article class=post-content><h1 id=oracle-权限视图约束>Oracle 权限、视图、约束</h1><h1 id=一数据库权限>一、数据库权限</h1><h2 id=1查看用户所属角色>1、查看用户所属角色</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> user_role_privs;
</span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012201694.png alt=image-20221201220132624></p><h2 id=2查询角色权限>2、查询角色权限</h2><p><strong>CONNECT：仅连接权限</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> dba_sys_privs <span style=color:#66d9ef>where</span> grantee<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;CONNECT&#39;</span>
</span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012209374.png alt=image-20221201220957322></p><p><strong>查看RESOURCE权限</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> dba_sys_privs <span style=color:#66d9ef>where</span> grantee<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;RESOURCE&#39;</span>
</span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012203650.png alt=image-20221201220328597></p><p><strong>DBA角色权限查看</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> dba_sys_privs <span style=color:#66d9ef>where</span> grantee<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;DBA&#39;</span>
</span></span></code></pre></div><h2 id=3用户授权>3、用户授权</h2><p>例如：授予scoot拥有dba的权限</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>grant</span> dba <span style=color:#66d9ef>to</span> scott;
</span></span></code></pre></div><h1 id=二视图>二、视图</h1><h2 id=1创建视图>1、创建视图</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>Create</span> <span style=color:#66d9ef>view</span> <span style=color:#960050;background-color:#1e0010>视图名称</span><span style=color:#66d9ef>as</span> <span style=color:#960050;background-color:#1e0010>查询语句</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>create</span> <span style=color:#66d9ef>view</span> v_emp1 <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>select</span> ename,job <span style=color:#66d9ef>from</span> emp;
</span></span></code></pre></div><h2 id=2修改视图>2、修改视图</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>create</span> <span style=color:#66d9ef>or</span> <span style=color:#66d9ef>replace</span> <span style=color:#66d9ef>view</span> <span style=color:#960050;background-color:#1e0010>始图名称</span> <span style=color:#66d9ef>as</span> <span style=color:#960050;background-color:#1e0010>新的查询数据；</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>create</span> <span style=color:#66d9ef>or</span> <span style=color:#66d9ef>replace</span> <span style=color:#66d9ef>view</span> vemp <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>select</span> empno,ename,job <span style=color:#66d9ef>from</span> EMP t;
</span></span></code></pre></div><p><strong>注意与创建视图的不同：多了一个or replace</strong></p><h2 id=3删除视图>3、删除视图</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>drop</span> <span style=color:#66d9ef>view</span> <span style=color:#960050;background-color:#1e0010>视图名称；</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>drop</span> <span style=color:#66d9ef>view</span> vemp2;
</span></span></code></pre></div><h2 id=4使用视图>4、使用视图</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> <span style=color:#960050;background-color:#1e0010>视图；</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> vemp;
</span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012228891.png alt=image-20221201222807834></p><p>就当作是一张虚拟的表使用。</p><h2 id=5修改视图数据>5、修改视图数据</h2><p><strong>注意：修改视图数据，实际是修改实际表的数据，不是视图的数据。</strong></p><p>例如修改上面视图数据：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>update</span> vemp <span style=color:#66d9ef>set</span> ename<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;xxxx&#39;</span> <span style=color:#66d9ef>where</span> job<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;CLERK&#39;</span> <span style=color:#66d9ef>and</span> empno<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;7369&#39;</span>
</span></span></code></pre></div><p>修改后：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012232871.png alt=image-20221201223253824></p><p>最后实际修改的是，视图中查询数据表的实际数据。</p><p>上面视图实际修改的是EMP表的数据：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> EMP;
</span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012234776.png alt=image-20221201223415731></p><p><strong>注意：修改视图数据时，实际是修改实际表的数据，不是视图的数据。</strong></p><h2 id=6视图添加数据>6、视图添加数据</h2><p><strong>注意：向视图数据添加数据，实际是向实际表中添加数据</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>和普通表添加数据一样，视图只是在向实际的表添加数据</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>insert</span> <span style=color:#66d9ef>into</span> vemp <span style=color:#66d9ef>values</span>(<span style=color:#e6db74>&#39;1111&#39;</span>,<span style=color:#e6db74>&#39;bbbbb&#39;</span>,<span style=color:#e6db74>&#39;teacher&#39;</span>);
</span></span></code></pre></div><p>查看添加视图数据，实际是向实际表中添加了数据。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> vemp;
</span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012240933.png alt=image-20221201224019886></p><p>查看实际表中数据：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> EMP;
</span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012241118.png alt=image-20221201224100073></p><h2 id=7删除视图中数据>7、删除视图中数据</h2><p><strong>和普通删除表数据一样，实际是删除的实际表中数据。</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>delete</span> <span style=color:#66d9ef>from</span> vemp <span style=color:#66d9ef>where</span> empno<span style=color:#f92672>=</span><span style=color:#ae81ff>1111</span>
</span></span></code></pre></div><p><strong>总结：对视图中数据的CRUD实际是对真实表的数据操作，实际开发中一般都会将视图设置为只读，防止误操作。</strong></p><h2 id=8只读视图>8、只读视图</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>Create</span> <span style=color:#66d9ef>view</span> <span style=color:#960050;background-color:#1e0010>视图名称</span><span style=color:#66d9ef>as</span> <span style=color:#960050;background-color:#1e0010>查询语句</span> <span style=color:#66d9ef>with</span> <span style=color:#66d9ef>read</span> <span style=color:#66d9ef>only</span>;
</span></span></code></pre></div><p>当向视图添加、删除、修改数据时，都会提示“无法对只读视图执行dml操作”。</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012246375.png alt=image-20221201224640327></p><h1 id=三约束>三、约束</h1><h2 id=1主键约束primary>1、主键约束（Primary）</h2><p><strong>用来标识唯一一条记录的。</strong></p><p><strong>非空，和其它表的外键有关系，其它表的外键关联该表的主键，起到约束作用。</strong></p><p>一般用作条件查询、条件修改、条件删除等操作。</p><p><img src=C:%5CUsers%5Ci2%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221201230029437.png alt=image-20221201230029437></p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012300958.png alt=image-20221201230052918></p><p>id设置为主键。</p><p>查询一条数据：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>insert</span> <span style=color:#66d9ef>into</span> t_bookType <span style=color:#66d9ef>values</span>(<span style=color:#ae81ff>1</span>,<span style=color:#e6db74>&#39;java history&#39;</span>);
</span></span></code></pre></div><p>查看数据：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> t_bookType;
</span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012301348.png alt=image-20221201230154298></p><p>查看建外键sql语句：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012312310.png alt=image-20221201231246259></p><p>查看sql：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012313874.png alt=image-20221201231323785></p><p>这里就能看到建表、建主键的sql语句了：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012314108.png alt=image-20221201231410027></p><h2 id=2外键约束foreign>2、外键约束(Foreign)</h2><p><strong>起到约束作用。</strong></p><p>新建表：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012310326.png alt=image-20221201231015271></p><p>创建外键：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012310803.png alt=image-20221201231057760></p><p><strong>注意：另一张表t_bookType的主键id不能为空，否则建外键时会报错id不能为空。</strong></p><p>查看建外键sql语句和上面一样：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012316759.png alt=image-20221201231613679></p><p><strong>约束作用</strong>：</p><p>查看t_bookType数据：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012320563.png alt=image-20221201232021517></p><p>向t_book添加数据时：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012323485.png alt=image-20221201232336435></p><p>添加一条不存在的主键数据时，就会提示“违反完整约束条件”</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012325323.png alt=image-20221201232551276></p><p>因此起到了，约束添加的外键只能是另一张表里面存在的主键。</p><h2 id=3唯一性约束unique>3、唯一性约束(Unique)</h2><p><strong>约束某些字段值作为唯一标识，不能重复添加相同数据。</strong></p><p><strong>添加方式</strong></p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012331460.png alt=image-20221201233106413></p><p>查看sql脚本同上：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012332516.png alt=image-20221201233203461></p><p>没加约束前，可以添加相同bookTypeName的记录，加了约束后会提示报错"违反唯一约束条件"</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012334513.png alt=image-20221201233448457></p><h2 id=4检查约束针对所有记录上面123都是正对一条记录>4、检查约束（针对所有记录，上面1、2、3都是正对一条记录）</h2><p><strong>给某个字段添加，写入值的条件。</strong></p><p>t_book增加价格price字段：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012339215.png alt=image-20221201233919169></p><p>查询t_book:</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012340325.png alt=image-20221201234012280></p><p>如果以后向每次添加数据时，检查price价格返回是否在50-100之间，就可以使用检查约束。</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012342677.png alt=image-20221201234232628></p><p>添加检查约束sql：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012343933.png alt=image-20221201234305880></p><p>添加数据价格在范围内不报错，超出范围会提示报错“范围检查约束条件”</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012345141.png alt=image-20221201234531086></p><h2 id=5默认值约束>5、默认值约束</h2><p><strong>其实就是添加数据时，某些字段没有设置时，给字段设置默认值。</strong></p><p>t_book增加作者性别字段：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012351642.png alt=image-20221201235100591></p><p>添加一条数据：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>insert</span> <span style=color:#66d9ef>into</span> T_BOOK(id,BOOKNAME,TYPE_ID,price) <span style=color:#66d9ef>values</span>(<span style=color:#ae81ff>3</span>,<span style=color:#e6db74>&#39;jvm并发&#39;</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>66</span>);
</span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212012354361.png alt=image-20221201235448310></p><p>新加数据sex性别为空，不符合实际逻辑，怎么会没有性别，因此想设置默认值。</p><p><strong>添加默认值约束</strong>：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212020000641.png alt=image-20221202000008584></p><p>重新添加一条数据：此时就有默认值了。</p><p>删除上面添加没有sex性别的记录，重新加添；</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>insert</span> <span style=color:#66d9ef>into</span> T_BOOK(id,BOOKNAME,TYPE_ID,price) <span style=color:#66d9ef>values</span>(<span style=color:#ae81ff>3</span>,<span style=color:#e6db74>&#39;jvm并发&#39;</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>66</span>);
</span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212020002972.png alt=image-20221202000202926></p><p>现在就有值了。</p><p>添加默认值约束SQL：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212020004411.png alt=image-20221202000437367></p><h2 id=6非空约束>6、非空约束</h2><p><strong>设置字段值不能为空</strong></p><p>勾选：允许为空，</p><p>不勾选：不允许为空。</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212020006118.png alt=image-20221202000615061></p><p>查询一条件数据，价格不添加：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212020007992.png alt=image-20221202000732929></p><p>添加数据值，为添加price的值，由于设置了非空约束，不能为空，所以报错“无法将null插入”</p></article><footer class=post-footer><ul class=post-tags><li><a href=https://willxwu.github.io/tags/oracle><span class=tag>Oracle</span></a></li><li><a href=https://willxwu.github.io/tags/%E6%9D%83%E9%99%90><span class=tag>权限</span></a></li><li><a href=https://willxwu.github.io/tags/%E8%A7%86%E5%9B%BE><span class=tag>视图</span></a></li><li><a href=https://willxwu.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93><span class=tag>数据库</span></a></li><li><a href=https://willxwu.github.io/tags/%E7%BA%A6%E6%9D%9F><span class=tag>约束</span></a></li></ul><p class=post-copyright>© This post is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License，please give source if you wish to quote or reproduce.This post was published <strong>486</strong> days ago, content in the post may be inaccurate, even wrong now, please take risk yourself.</p></footer><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//yanxizhu.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section><footer class=site-footer><p>© 2017-2023 Come Back</p><p>Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> with theme <a href=https://github.com/laozhu/hugo-nuo target=_blank rel=noopener>Nuo</a>.</p></footer><script src=https://cdn.jsdelivr.net/npm/smooth-scroll@15.0.0/dist/smooth-scroll.min.js></script>
<script async src=https://cdn.jsdelivr.net/npm/video.js@7.3.0/dist/video.min.js></script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type=text/x-mathjax-config>
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\\[','\\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { equationNumbers: { autoNumber: "AMS" },
      extensions: ["AMSmath.js", "AMSsymbols.js"] }
    },
  });
</script><script type=text/x-mathjax-config>
  // Fix <code> tags after MathJax finishes running. This is a
  // hack to overcome a shortcoming of Markdown. Discussion at
  // https://github.com/mojombo/jekyll/issues/199
  MathJax.Hub.Queue(() => {
    MathJax.Hub.getAllJax().map(v => v.SourceElement().parentNode.className += ' has-jax');
  });
</script><script src=https://willxwu.github.io/scripts/index.min.js></script>
<script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(function(){console.log("[ServiceWorker] Registered")})</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-XXXXXXXX-X","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>