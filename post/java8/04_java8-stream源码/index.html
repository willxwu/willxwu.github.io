<!doctype html><html lang=en><head><meta charset=utf-8><title>JAVA8-Stream源码</title><link href=//cdn.jsdelivr.net rel=dns-prefetch><link href=//cdnjs.cloudflare.com rel=dns-prefetch><link href=//at.alicdn.com rel=dns-prefetch><link href=//fonts.googleapis.com rel=dns-prefetch><link href=//fonts.gstatic.com rel=dns-prefetch><link href=///disqus.com rel=dns-prefetch><link href=//c.disquscdn.com rel=dns-prefetch><link href=//www.google-analytics.com rel=dns-prefetch><meta name=description content="Stream基本使用及特点 Stream说明 Stream操作分为：2组，//注意，流式管道操作，只能操作一次，否则报错。
1、可连续操作：
filter, map, and limit can be connected together to form a pipeline. 2、操作中断
collect causes the pipeline to be executed and closes it. 使用范例： package com.example.study.java8.streams; import java.util.*; import java.util.stream.Stream; import static java.util.Comparator.comparing; import static java.util.stream.Collectors.toList; /** * Stream使用 * Stream操作分为：2组，//注意，流式管道操作，只能操作一次，否则报错 * You can see two groups of operations: * 1、可连续操作 *  filter, map, and limit can be connected together to form a pipeline. * 2、操作中断 *  collect causes the pipeline to be executed and closes it."><meta name=twitter:card content="summary"><meta name=twitter:site content="@twitter_username"><meta name=twitter:title content="JAVA8-Stream源码"><meta name=twitter:description content="Stream基本使用及特点 Stream说明 Stream操作分为：2组，//注意，流式管道操作，只能操作一次，否则报错。
1、可连续操作：
filter, map, and limit can be connected together to form a pipeline. 2、操作中断
collect causes the pipeline to be executed and closes it. 使用范例： package com.example.study.java8.streams; import java.util.*; import java.util.stream.Stream; import static java.util.Comparator.comparing; import static java.util.stream.Collectors.toList; /** * Stream使用 * Stream操作分为：2组，//注意，流式管道操作，只能操作一次，否则报错 * You can see two groups of operations: * 1、可连续操作 *  filter, map, and limit can be connected together to form a pipeline. * 2、操作中断 *  collect causes the pipeline to be executed and closes it."><meta name=twitter:image content="/images/avatar.png"><meta property="og:type" content="article"><meta property="og:title" content="JAVA8-Stream源码"><meta property="og:description" content="Stream基本使用及特点 Stream说明 Stream操作分为：2组，//注意，流式管道操作，只能操作一次，否则报错。
1、可连续操作：
filter, map, and limit can be connected together to form a pipeline. 2、操作中断
collect causes the pipeline to be executed and closes it. 使用范例： package com.example.study.java8.streams; import java.util.*; import java.util.stream.Stream; import static java.util.Comparator.comparing; import static java.util.stream.Collectors.toList; /** * Stream使用 * Stream操作分为：2组，//注意，流式管道操作，只能操作一次，否则报错 * You can see two groups of operations: * 1、可连续操作 *  filter, map, and limit can be connected together to form a pipeline. * 2、操作中断 *  collect causes the pipeline to be executed and closes it."><meta property="og:url" content="https://willxwu.github.io/post/java8/04_java8-stream%E6%BA%90%E7%A0%81/"><meta property="og:image" content="/images/avatar.png"><link rel=canonical href=https://willxwu.github.io/post/java8/04_java8-stream%E6%BA%90%E7%A0%81/><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no,email=no,adress=no"><meta http-equiv=cache-control content="no-transform"><meta name=robots content="index,follow"><meta name=referrer content="origin-when-cross-origin"><meta name=theme-color content="#02b875"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=apple-mobile-web-app-title content="Come Back"><meta name=msapplication-tooltip content="Come Back"><meta name=msapplication-navbutton-color content="#02b875"><meta name=msapplication-TileColor content="#02b875"><meta name=msapplication-TileImage content="/icons/icon-144x144.png"><link rel=icon href=https://willxwu.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://willxwu.github.io/icons/icon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://willxwu.github.io/icons/icon-32x32.png><link rel=icon sizes=192x192 href=https://willxwu.github.io/icons/icon-192x192.png><link rel=apple-touch-icon href=https://willxwu.github.io/icons/icon-152x152.png><link rel=manifest href=https://willxwu.github.io/manifest.json><link rel=preload href=https://willxwu.github.io/styles/main-rendered.min.css as=style><link rel=preload href="https://fonts.googleapis.com/css?family=Lobster" as=style><link rel=preload href=https://willxwu.github.io/images/avatar.png as=image><link rel=preload href=https://willxwu.github.io/images/grey-prism.svg as=image><style>body{background:#f4f3f1 url(/images/grey-prism.svg)repeat fixed}</style><link rel=stylesheet href=https://willxwu.github.io/styles/main-rendered.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lobster"><script src=https://cdn.jsdelivr.net/npm/medium-zoom@1.0.2/dist/medium-zoom.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/video.js@7.3.0/dist/video-js.min.css><!--[if lte IE 8]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/videojs-ie8@1.1.2/dist/videojs-ie8.min.js></script><![endif]--><!--[if lte IE 9]><script src=https://cdn.jsdelivr.net/npm/eligrey-classlist-js-polyfill@1.2.20180112/classList.min.js></script><![endif]--></head><body><div class=suspension><a role=button aria-label="Go to top" title="Go to top" class="to-top is-hide"><span class="icon icon-up" aria-hidden=true></span></a>
<a role=button aria-label="Go to comments" title="Go to comments" class=to-comment href=#disqus_thread><span class="icon icon-comment" aria-hidden=true></span></a></div><header class=site-header><a href=https://willxwu.github.io><img class=avatar src=https://willxwu.github.io/images/avatar.png alt=Avatar></a><h2 class=title><a href=https://willxwu.github.io>Come Back</a></h2><p class=subtitle>All kinds of taste, are life.</p><button class=menu-toggle type=button aria-label="Main Menu" aria-expanded=false tab-index=0>
<span class="icon icon-menu" aria-hidden=true></span></button><nav class="site-menu collapsed"><h2 class=offscreen>Main Menu</h2><ul class=menu-list><li class="menu-item
is-active"><a href=https://willxwu.github.io/>Home</a></li><li class=menu-item><a href=https://willxwu.github.io/archives/>archives</a></li><li class=menu-item><a href=https://willxwu.github.io/tags/>Tags</a></li><li class=menu-item><a href=https://willxwu.github.io/links/>Links</a></li><li class=menu-item><a href=https://willxwu.github.io/resume/>resume</a></li><li class=menu-item><a href=https://willxwu.github.io/about/>About</a></li></ul></nav><nav class="social-menu collapsed"><h2 class=offscreen>Social Networks</h2><ul class=social-list><li class=social-item><a href=mailto:name@domain.com title=Email aria-label=Email><span class="icon icon-email" aria-hidden=true></span></a></li><li class=social-item><a href=//github.com/github_username rel=me title=GitHub aria-label=GitHub><span class="icon icon-github" aria-hidden=true></span></a></li><li class=social-item><a href=//twitter.com/twitter_username rel=me title=Twitter aria-label=Twitter><span class="icon icon-twitter" aria-hidden=true></span></a></li><li class=social-item><a href=//weibo.com/weibo_username rel=me title=Weibo aria-label=Weibo><span class="icon icon-weibo" aria-hidden=true></span></a></li><li class=social-item><a href=https://willxwu.github.io/images/qrcode.jpg rel=me title=Wechat aria-label=Wechat><span class="icon icon-wechat" aria-hidden=true></span></a></li><li class=social-item><a href=//www.linkedin.com/in/linkedin_username rel=me title=LinkedIn aria-label=LinkedIn><span class="icon icon-linkedin" aria-hidden=true></span></a></li></ul></nav></header><section class="main post-detail"><header class=post-header><h1 class=post-title>JAVA8-Stream源码</h1><p class=post-meta>@Come Back · Jun 27, 2022 · 41 min read</p></header><article class=post-content><h2 id=stream基本使用及特点>Stream基本使用及特点</h2><h4 id=stream说明>Stream说明</h4><p>Stream操作分为：2组，//注意，流式管道操作，只能操作一次，否则报错。</p><p>1、可连续操作：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span> filter<span style=color:#f92672>,</span> map<span style=color:#f92672>,</span> and limit can be connected together to form a pipeline<span style=color:#f92672>.</span>
</span></span></code></pre></div><p>2、操作中断</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>collect causes the pipeline to be executed and closes it<span style=color:#f92672>.</span>
</span></span></code></pre></div><h4 id=使用范例>使用范例：</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> com.example.study.java8.streams<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.*<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.stream.Stream<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import static</span> java.util.Comparator.comparing<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import static</span> java.util.stream.Collectors.toList<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * Stream使用
</span></span></span><span style=display:flex><span><span style=color:#75715e> * Stream操作分为：2组，//注意，流式管道操作，只能操作一次，否则报错
</span></span></span><span style=display:flex><span><span style=color:#75715e> * You can see two groups of operations:
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 1、可连续操作
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  filter, map, and limit can be connected together to form a pipeline.
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 2、操作中断
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  collect causes the pipeline to be executed and closes it.
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SimpleStream</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>Dish<span style=color:#f92672>&gt;</span> menu <span style=color:#f92672>=</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> Dish<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;pork&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>,</span> 800<span style=color:#f92672>,</span> Dish<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>MEAT</span><span style=color:#f92672>),</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> Dish<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;beef&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>,</span> 700<span style=color:#f92672>,</span> Dish<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>MEAT</span><span style=color:#f92672>),</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> Dish<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;chicken&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>,</span> 400<span style=color:#f92672>,</span> Dish<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>MEAT</span><span style=color:#f92672>),</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> Dish<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;french fries&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>,</span> 530<span style=color:#f92672>,</span> Dish<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>OTHER</span><span style=color:#f92672>),</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> Dish<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;rice&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>,</span> 350<span style=color:#f92672>,</span> Dish<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>OTHER</span><span style=color:#f92672>),</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> Dish<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;season fruit&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>,</span> 120<span style=color:#f92672>,</span> Dish<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>OTHER</span><span style=color:#f92672>),</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> Dish<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;pizza&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>,</span> 550<span style=color:#f92672>,</span> Dish<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>OTHER</span><span style=color:#f92672>),</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> Dish<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;prawns&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>,</span> 300<span style=color:#f92672>,</span> Dish<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>FISH</span><span style=color:#f92672>),</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> Dish<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;salmon&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>,</span> 450<span style=color:#f92672>,</span> Dish<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>FISH</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Stream<span style=color:#f92672>&lt;</span>Dish<span style=color:#f92672>&gt;</span> stream <span style=color:#f92672>=</span> menu<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        stream<span style=color:#f92672>.</span><span style=color:#a6e22e>forEach</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>//注意，流式管道操作，只能操作一次，否则报错
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>//stream has already been operated upon or closed
</span></span></span><span style=display:flex><span><span style=color:#75715e>//        stream.forEach(System.out::println);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;====================================&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>//原始调用
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> namesByCollections <span style=color:#f92672>=</span> getDishNamesByCollections<span style=color:#f92672>(</span>menu<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        namesByCollections<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>().</span><span style=color:#a6e22e>forEach</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;====================================&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>//lambda stream调用
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> lambdaStreamNames <span style=color:#f92672>=</span> lambdaStream<span style=color:#f92672>(</span>menu<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        lambdaStreamNames<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>().</span><span style=color:#a6e22e>forEach</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//原始写法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>getDishNamesByCollections</span><span style=color:#f92672>(</span>List<span style=color:#f92672>&lt;</span>Dish<span style=color:#f92672>&gt;</span> menu<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>Dish<span style=color:#f92672>&gt;</span> caloriesDis <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;();</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Dish dish <span style=color:#f92672>:</span> menu<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>dish<span style=color:#f92672>.</span><span style=color:#a6e22e>getCalories</span><span style=color:#f92672>()</span> <span style=color:#f92672>&lt;</span> 400<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                caloriesDis<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>dish<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        Collections<span style=color:#f92672>.</span><span style=color:#a6e22e>sort</span><span style=color:#f92672>(</span>caloriesDis<span style=color:#f92672>,</span> <span style=color:#f92672>(</span>dish1<span style=color:#f92672>,</span> dish2<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>compare</span><span style=color:#f92672>(</span>dish1<span style=color:#f92672>.</span><span style=color:#a6e22e>getCalories</span><span style=color:#f92672>(),</span> dish2<span style=color:#f92672>.</span><span style=color:#a6e22e>getCalories</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>});</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> names <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;();</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span>Dish dish <span style=color:#f92672>:</span> caloriesDis<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>            names<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>dish<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> names<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//stream lambda处理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>lambdaStream</span><span style=color:#f92672>(</span>List<span style=color:#f92672>&lt;</span>Dish<span style=color:#f92672>&gt;</span> menu<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> menu<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>().</span><span style=color:#a6e22e>filter</span><span style=color:#f92672>(</span>dis <span style=color:#f92672>-&gt;</span> dis<span style=color:#f92672>.</span><span style=color:#a6e22e>getCalories</span><span style=color:#f92672>()</span> <span style=color:#f92672>&lt;</span> 400<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>.</span><span style=color:#a6e22e>sorted</span><span style=color:#f92672>(</span>comparing<span style=color:#f92672>(</span>Dish<span style=color:#f92672>::</span>getCalories<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>Dish<span style=color:#f92672>::</span>getName<span style=color:#f92672>).</span><span style=color:#a6e22e>collect</span><span style=color:#f92672>(</span>toList<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h2 id=主要掌握stream接口中常用方法><strong>主要掌握Stream接口中常用方法。</strong></h2><p>Stream源码：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * Copyright (c) 2012, 2017, Oracle and/or its affiliates. All rights reserved.
</span></span></span><span style=display:flex><span><span style=color:#75715e> * ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#f92672>package</span> java.util.stream<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.nio.file.Files<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.nio.file.Path<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Arrays<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Collection<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Comparator<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Objects<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Optional<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Spliterator<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Spliterators<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.concurrent.ConcurrentHashMap<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.function.BiConsumer<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.function.BiFunction<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.function.BinaryOperator<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.function.Consumer<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.function.Function<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.function.IntFunction<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.function.Predicate<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.function.Supplier<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.function.ToDoubleFunction<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.function.ToIntFunction<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.function.ToLongFunction<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.function.UnaryOperator<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * A sequence of elements supporting sequential and parallel aggregate
</span></span></span><span style=display:flex><span><span style=color:#75715e> * operations.  The following example illustrates an aggregate operation using
</span></span></span><span style=display:flex><span><span style=color:#75715e> * {@link Stream} and {@link IntStream}:
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e> *     int sum = widgets.stream()
</span></span></span><span style=display:flex><span><span style=color:#75715e> *                      .filter(w -&gt; w.getColor() == RED)
</span></span></span><span style=display:flex><span><span style=color:#75715e> *                      .mapToInt(w -&gt; w.getWeight())
</span></span></span><span style=display:flex><span><span style=color:#75715e> *                      .sum();
</span></span></span><span style=display:flex><span><span style=color:#75715e> * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * In this example, {@code widgets} is a {@code Collection&lt;Widget&gt;}.  We create
</span></span></span><span style=display:flex><span><span style=color:#75715e> * a stream of {@code Widget} objects via {@link Collection#stream Collection.stream()},
</span></span></span><span style=display:flex><span><span style=color:#75715e> * filter it to produce a stream containing only the red widgets, and then
</span></span></span><span style=display:flex><span><span style=color:#75715e> * transform it into a stream of {@code int} values representing the weight of
</span></span></span><span style=display:flex><span><span style=color:#75715e> * each red widget. Then this stream is summed to produce a total weight.
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;p&gt;In addition to {@code Stream}, which is a stream of object references,
</span></span></span><span style=display:flex><span><span style=color:#75715e> * there are primitive specializations for {@link IntStream}, {@link LongStream},
</span></span></span><span style=display:flex><span><span style=color:#75715e> * and {@link DoubleStream}, all of which are referred to as &#34;streams&#34; and
</span></span></span><span style=display:flex><span><span style=color:#75715e> * conform to the characteristics and restrictions described here.
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;p&gt;To perform a computation, stream
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;operations&lt;/a&gt; are composed into a
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;em&gt;stream pipeline&lt;/em&gt;.  A stream pipeline consists of a source (which
</span></span></span><span style=display:flex><span><span style=color:#75715e> * might be an array, a collection, a generator function, an I/O channel,
</span></span></span><span style=display:flex><span><span style=color:#75715e> * etc), zero or more &lt;em&gt;intermediate operations&lt;/em&gt; (which transform a
</span></span></span><span style=display:flex><span><span style=color:#75715e> * stream into another stream, such as {@link Stream#filter(Predicate)}), and a
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;em&gt;terminal operation&lt;/em&gt; (which produces a result or side-effect, such
</span></span></span><span style=display:flex><span><span style=color:#75715e> * as {@link Stream#count()} or {@link Stream#forEach(Consumer)}).
</span></span></span><span style=display:flex><span><span style=color:#75715e> * Streams are lazy; computation on the source data is only performed when the
</span></span></span><span style=display:flex><span><span style=color:#75715e> * terminal operation is initiated, and source elements are consumed only
</span></span></span><span style=display:flex><span><span style=color:#75715e> * as needed.
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;p&gt;A stream implementation is permitted significant latitude in optimizing
</span></span></span><span style=display:flex><span><span style=color:#75715e> * the computation of the result.  For example, a stream implementation is free
</span></span></span><span style=display:flex><span><span style=color:#75715e> * to elide operations (or entire stages) from a stream pipeline -- and
</span></span></span><span style=display:flex><span><span style=color:#75715e> * therefore elide invocation of behavioral parameters -- if it can prove that
</span></span></span><span style=display:flex><span><span style=color:#75715e> * it would not affect the result of the computation.  This means that
</span></span></span><span style=display:flex><span><span style=color:#75715e> * side-effects of behavioral parameters may not always be executed and should
</span></span></span><span style=display:flex><span><span style=color:#75715e> * not be relied upon, unless otherwise specified (such as by the terminal
</span></span></span><span style=display:flex><span><span style=color:#75715e> * operations {@code forEach} and {@code forEachOrdered}). (For a specific
</span></span></span><span style=display:flex><span><span style=color:#75715e> * example of such an optimization, see the API note documented on the
</span></span></span><span style=display:flex><span><span style=color:#75715e> * {@link #count} operation.  For more detail, see the
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;a href=&#34;package-summary.html#SideEffects&#34;&gt;side-effects&lt;/a&gt; section of the
</span></span></span><span style=display:flex><span><span style=color:#75715e> * stream package documentation.)
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;p&gt;Collections and streams, while bearing some superficial similarities,
</span></span></span><span style=display:flex><span><span style=color:#75715e> * have different goals.  Collections are primarily concerned with the efficient
</span></span></span><span style=display:flex><span><span style=color:#75715e> * management of, and access to, their elements.  By contrast, streams do not
</span></span></span><span style=display:flex><span><span style=color:#75715e> * provide a means to directly access or manipulate their elements, and are
</span></span></span><span style=display:flex><span><span style=color:#75715e> * instead concerned with declaratively describing their source and the
</span></span></span><span style=display:flex><span><span style=color:#75715e> * computational operations which will be performed in aggregate on that source.
</span></span></span><span style=display:flex><span><span style=color:#75715e> * However, if the provided stream operations do not offer the desired
</span></span></span><span style=display:flex><span><span style=color:#75715e> * functionality, the {@link #iterator()} and {@link #spliterator()} operations
</span></span></span><span style=display:flex><span><span style=color:#75715e> * can be used to perform a controlled traversal.
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;p&gt;A stream pipeline, like the &#34;widgets&#34; example above, can be viewed as
</span></span></span><span style=display:flex><span><span style=color:#75715e> * a &lt;em&gt;query&lt;/em&gt; on the stream source.  Unless the source was explicitly
</span></span></span><span style=display:flex><span><span style=color:#75715e> * designed for concurrent modification (such as a {@link ConcurrentHashMap}),
</span></span></span><span style=display:flex><span><span style=color:#75715e> * unpredictable or erroneous behavior may result from modifying the stream
</span></span></span><span style=display:flex><span><span style=color:#75715e> * source while it is being queried.
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;p&gt;Most stream operations accept parameters that describe user-specified
</span></span></span><span style=display:flex><span><span style=color:#75715e> * behavior, such as the lambda expression {@code w -&gt; w.getWeight()} passed to
</span></span></span><span style=display:flex><span><span style=color:#75715e> * {@code mapToInt} in the example above.  To preserve correct behavior,
</span></span></span><span style=display:flex><span><span style=color:#75715e> * these &lt;em&gt;behavioral parameters&lt;/em&gt;:
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;ul&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;li&gt;must be &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> * (they do not modify the stream source); and&lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;li&gt;in most cases must be &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> * (their result should not depend on any state that might change during execution
</span></span></span><span style=display:flex><span><span style=color:#75715e> * of the stream pipeline).&lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;/ul&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;p&gt;Such parameters are always instances of a
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;a href=&#34;../function/package-summary.html&#34;&gt;functional interface&lt;/a&gt; such
</span></span></span><span style=display:flex><span><span style=color:#75715e> * as {@link java.util.function.Function}, and are often lambda expressions or
</span></span></span><span style=display:flex><span><span style=color:#75715e> * method references.  Unless otherwise specified these parameters must be
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;em&gt;non-null&lt;/em&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;p&gt;A stream should be operated on (invoking an intermediate or terminal stream
</span></span></span><span style=display:flex><span><span style=color:#75715e> * operation) only once.  This rules out, for example, &#34;forked&#34; streams, where
</span></span></span><span style=display:flex><span><span style=color:#75715e> * the same source feeds two or more pipelines, or multiple traversals of the
</span></span></span><span style=display:flex><span><span style=color:#75715e> * same stream.  A stream implementation may throw {@link IllegalStateException}
</span></span></span><span style=display:flex><span><span style=color:#75715e> * if it detects that the stream is being reused. However, since some stream
</span></span></span><span style=display:flex><span><span style=color:#75715e> * operations may return their receiver rather than a new stream object, it may
</span></span></span><span style=display:flex><span><span style=color:#75715e> * not be possible to detect reuse in all cases.
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;p&gt;Streams have a {@link #close()} method and implement {@link AutoCloseable}.
</span></span></span><span style=display:flex><span><span style=color:#75715e> * Operating on a stream after it has been closed will throw {@link IllegalStateException}.
</span></span></span><span style=display:flex><span><span style=color:#75715e> * Most stream instances do not actually need to be closed after use, as they
</span></span></span><span style=display:flex><span><span style=color:#75715e> * are backed by collections, arrays, or generating functions, which require no
</span></span></span><span style=display:flex><span><span style=color:#75715e> * special resource management. Generally, only streams whose source is an IO channel,
</span></span></span><span style=display:flex><span><span style=color:#75715e> * such as those returned by {@link Files#lines(Path)}, will require closing. If a
</span></span></span><span style=display:flex><span><span style=color:#75715e> * stream does require closing, it must be opened as a resource within a try-with-resources
</span></span></span><span style=display:flex><span><span style=color:#75715e> * statement or similar control structure to ensure that it is closed promptly after its
</span></span></span><span style=display:flex><span><span style=color:#75715e> * operations have completed.
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;p&gt;Stream pipelines may execute either sequentially or in
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;a href=&#34;package-summary.html#Parallelism&#34;&gt;parallel&lt;/a&gt;.  This
</span></span></span><span style=display:flex><span><span style=color:#75715e> * execution mode is a property of the stream.  Streams are created
</span></span></span><span style=display:flex><span><span style=color:#75715e> * with an initial choice of sequential or parallel execution.  (For example,
</span></span></span><span style=display:flex><span><span style=color:#75715e> * {@link Collection#stream() Collection.stream()} creates a sequential stream,
</span></span></span><span style=display:flex><span><span style=color:#75715e> * and {@link Collection#parallelStream() Collection.parallelStream()} creates
</span></span></span><span style=display:flex><span><span style=color:#75715e> * a parallel one.)  This choice of execution mode may be modified by the
</span></span></span><span style=display:flex><span><span style=color:#75715e> * {@link #sequential()} or {@link #parallel()} methods, and may be queried with
</span></span></span><span style=display:flex><span><span style=color:#75715e> * the {@link #isParallel()} method.
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param &lt;T&gt; the type of the stream elements
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @since 1.8
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @see IntStream
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @see LongStream
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @see DoubleStream
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @see &lt;a href=&#34;package-summary.html&#34;&gt;java.util.stream&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Stream</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>extends</span> BaseStream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>,</span> Stream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;&gt;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns a stream consisting of the elements of this stream that match
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * the given predicate.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is an &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;intermediate
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param predicate a &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                  &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                  predicate to apply to each element to determine if it
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                  should be included
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    Stream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>filter</span><span style=color:#f92672>(</span>Predicate<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>&gt;</span> predicate<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns a stream consisting of the results of applying the given
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * function to the elements of this stream.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is an &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;intermediate
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param &lt;R&gt; The element type of the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param mapper a &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               function to apply to each element
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span>R<span style=color:#f92672>&gt;</span> Stream<span style=color:#f92672>&lt;</span>R<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>Function<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>,</span> <span style=color:#f92672>?</span> <span style=color:#66d9ef>extends</span> R<span style=color:#f92672>&gt;</span> mapper<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns an {@code IntStream} consisting of the results of applying the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * given function to the elements of this stream.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is an &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     intermediate operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param mapper a &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               function to apply to each element
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    IntStream <span style=color:#a6e22e>mapToInt</span><span style=color:#f92672>(</span>ToIntFunction<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>&gt;</span> mapper<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns a {@code LongStream} consisting of the results of applying the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * given function to the elements of this stream.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is an &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;intermediate
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param mapper a &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               function to apply to each element
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    LongStream <span style=color:#a6e22e>mapToLong</span><span style=color:#f92672>(</span>ToLongFunction<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>&gt;</span> mapper<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns a {@code DoubleStream} consisting of the results of applying the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * given function to the elements of this stream.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is an &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;intermediate
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param mapper a &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               function to apply to each element
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    DoubleStream <span style=color:#a6e22e>mapToDouble</span><span style=color:#f92672>(</span>ToDoubleFunction<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>&gt;</span> mapper<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns a stream consisting of the results of replacing each element of
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * this stream with the contents of a mapped stream produced by applying
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * the provided mapping function to each element.  Each mapped stream is
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@link java.util.stream.BaseStream#close() closed} after its contents
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * have been placed into this stream.  (If a mapped stream is {@code null}
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * an empty stream is used, instead.)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is an &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;intermediate
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @apiNote
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * The {@code flatMap()} operation has the effect of applying a one-to-many
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * transformation to the elements of the stream, and then flattening the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * resulting elements into a new stream.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;&lt;b&gt;Examples.&lt;/b&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;If {@code orders} is a stream of purchase orders, and each purchase
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * order contains a collection of line items, then the following produces a
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * stream containing all the line items in all the orders:
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     orders.flatMap(order -&gt; order.getLineItems().stream())...
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;If {@code path} is the path to a file, then the following produces a
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * stream of the {@code words} contained in that file:
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     Stream&lt;String&gt; lines = Files.lines(path, StandardCharsets.UTF_8);
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     Stream&lt;String&gt; words = lines.flatMap(line -&gt; Stream.of(line.split(&#34; +&#34;)));
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * The {@code mapper} function passed to {@code flatMap} splits a line,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * using a simple regular expression, into an array of words, and then
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * creates a stream of words from that array.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param &lt;R&gt; The element type of the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param mapper a &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               function to apply to each element which produces a stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               of new values
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span>R<span style=color:#f92672>&gt;</span> Stream<span style=color:#f92672>&lt;</span>R<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>flatMap</span><span style=color:#f92672>(</span>Function<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>,</span> <span style=color:#f92672>?</span> <span style=color:#66d9ef>extends</span> Stream<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>extends</span> R<span style=color:#f92672>&gt;&gt;</span> mapper<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns an {@code IntStream} consisting of the results of replacing each
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * element of this stream with the contents of a mapped stream produced by
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * applying the provided mapping function to each element.  Each mapped
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * stream is {@link java.util.stream.BaseStream#close() closed} after its
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * contents have been placed into this stream.  (If a mapped stream is
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@code null} an empty stream is used, instead.)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is an &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;intermediate
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param mapper a &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               function to apply to each element which produces a stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               of new values
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @see #flatMap(Function)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    IntStream <span style=color:#a6e22e>flatMapToInt</span><span style=color:#f92672>(</span>Function<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>,</span> <span style=color:#f92672>?</span> <span style=color:#66d9ef>extends</span> IntStream<span style=color:#f92672>&gt;</span> mapper<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns an {@code LongStream} consisting of the results of replacing each
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * element of this stream with the contents of a mapped stream produced by
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * applying the provided mapping function to each element.  Each mapped
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * stream is {@link java.util.stream.BaseStream#close() closed} after its
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * contents have been placed into this stream.  (If a mapped stream is
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@code null} an empty stream is used, instead.)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is an &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;intermediate
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param mapper a &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               function to apply to each element which produces a stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               of new values
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @see #flatMap(Function)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    LongStream <span style=color:#a6e22e>flatMapToLong</span><span style=color:#f92672>(</span>Function<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>,</span> <span style=color:#f92672>?</span> <span style=color:#66d9ef>extends</span> LongStream<span style=color:#f92672>&gt;</span> mapper<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns an {@code DoubleStream} consisting of the results of replacing
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * each element of this stream with the contents of a mapped stream produced
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * by applying the provided mapping function to each element.  Each mapped
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * stream is {@link java.util.stream.BaseStream#close() closed} after its
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * contents have placed been into this stream.  (If a mapped stream is
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@code null} an empty stream is used, instead.)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is an &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;intermediate
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param mapper a &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               function to apply to each element which produces a stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               of new values
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @see #flatMap(Function)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    DoubleStream <span style=color:#a6e22e>flatMapToDouble</span><span style=color:#f92672>(</span>Function<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>,</span> <span style=color:#f92672>?</span> <span style=color:#66d9ef>extends</span> DoubleStream<span style=color:#f92672>&gt;</span> mapper<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns a stream consisting of the distinct elements (according to
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@link Object#equals(Object)}) of this stream.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;For ordered streams, the selection of distinct elements is stable
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * (for duplicated elements, the element appearing first in the encounter
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * order is preserved.)  For unordered streams, no stability guarantees
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * are made.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;stateful
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * intermediate operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @apiNote
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Preserving stability for {@code distinct()} in parallel pipelines is
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * relatively expensive (requires that the operation act as a full barrier,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * with substantial buffering overhead), and stability is often not needed.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Using an unordered stream source (such as {@link #generate(Supplier)})
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * or removing the ordering constraint with {@link #unordered()} may result
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * in significantly more efficient execution for {@code distinct()} in parallel
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * pipelines, if the semantics of your situation permit.  If consistency
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * with encounter order is required, and you are experiencing poor performance
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * or memory utilization with {@code distinct()} in parallel pipelines,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * switching to sequential execution with {@link #sequential()} may improve
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * performance.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    Stream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>distinct</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns a stream consisting of the elements of this stream, sorted
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * according to natural order.  If the elements of this stream are not
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@code Comparable}, a {@code java.lang.ClassCastException} may be thrown
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * when the terminal operation is executed.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;For ordered streams, the sort is stable.  For unordered streams, no
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * stability guarantees are made.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;stateful
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * intermediate operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    Stream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>sorted</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns a stream consisting of the elements of this stream, sorted
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * according to the provided {@code Comparator}.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;For ordered streams, the sort is stable.  For unordered streams, no
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * stability guarantees are made.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;stateful
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * intermediate operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param comparator a &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                   &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                   {@code Comparator} to be used to compare stream elements
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    Stream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>sorted</span><span style=color:#f92672>(</span>Comparator<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>&gt;</span> comparator<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns a stream consisting of the elements of this stream, additionally
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * performing the provided action on each element as elements are consumed
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * from the resulting stream.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is an &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;intermediate
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;For parallel stream pipelines, the action may be called at
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * whatever time and in whatever thread the element is made available by the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * upstream operation.  If the action modifies shared state,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * it is responsible for providing the required synchronization.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @apiNote This method exists mainly to support debugging, where you want
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * to see the elements as they flow past a certain point in a pipeline:
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     Stream.of(&#34;one&#34;, &#34;two&#34;, &#34;three&#34;, &#34;four&#34;)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *         .filter(e -&gt; e.length() &gt; 3)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *         .peek(e -&gt; System.out.println(&#34;Filtered value: &#34; + e))
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *         .map(String::toUpperCase)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *         .peek(e -&gt; System.out.println(&#34;Mapped value: &#34; + e))
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *         .collect(Collectors.toList());
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;In cases where the stream implementation is able to optimize away the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * production of some or all the elements (such as with short-circuiting
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operations like {@code findFirst}, or in the example described in
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@link #count}), the action will not be invoked for those elements.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param action a &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                 non-interfering&lt;/a&gt; action to perform on the elements as
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                 they are consumed from the stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    Stream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>peek</span><span style=color:#f92672>(</span>Consumer<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>&gt;</span> action<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns a stream consisting of the elements of this stream, truncated
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * to be no longer than {@code maxSize} in length.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;short-circuiting
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * stateful intermediate operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @apiNote
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * While {@code limit()} is generally a cheap operation on sequential
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * stream pipelines, it can be quite expensive on ordered parallel pipelines,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * especially for large values of {@code maxSize}, since {@code limit(n)}
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * is constrained to return not just any &lt;em&gt;n&lt;/em&gt; elements, but the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;em&gt;first n&lt;/em&gt; elements in the encounter order.  Using an unordered
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * stream source (such as {@link #generate(Supplier)}) or removing the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * ordering constraint with {@link #unordered()} may result in significant
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * speedups of {@code limit()} in parallel pipelines, if the semantics of
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * your situation permit.  If consistency with encounter order is required,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * and you are experiencing poor performance or memory utilization with
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@code limit()} in parallel pipelines, switching to sequential execution
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * with {@link #sequential()} may improve performance.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param maxSize the number of elements the stream should be limited to
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @throws IllegalArgumentException if {@code maxSize} is negative
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    Stream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>limit</span><span style=color:#f92672>(</span><span style=color:#66d9ef>long</span> maxSize<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns a stream consisting of the remaining elements of this stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * after discarding the first {@code n} elements of the stream.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * If this stream contains fewer than {@code n} elements then an
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * empty stream will be returned.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;stateful
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * intermediate operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @apiNote
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * While {@code skip()} is generally a cheap operation on sequential
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * stream pipelines, it can be quite expensive on ordered parallel pipelines,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * especially for large values of {@code n}, since {@code skip(n)}
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * is constrained to skip not just any &lt;em&gt;n&lt;/em&gt; elements, but the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;em&gt;first n&lt;/em&gt; elements in the encounter order.  Using an unordered
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * stream source (such as {@link #generate(Supplier)}) or removing the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * ordering constraint with {@link #unordered()} may result in significant
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * speedups of {@code skip()} in parallel pipelines, if the semantics of
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * your situation permit.  If consistency with encounter order is required,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * and you are experiencing poor performance or memory utilization with
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@code skip()} in parallel pipelines, switching to sequential execution
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * with {@link #sequential()} may improve performance.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param n the number of leading elements to skip
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @throws IllegalArgumentException if {@code n} is negative
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    Stream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>skip</span><span style=color:#f92672>(</span><span style=color:#66d9ef>long</span> n<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns, if this stream is ordered, a stream consisting of the longest
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * prefix of elements taken from this stream that match the given predicate.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Otherwise returns, if this stream is unordered, a stream consisting of a
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * subset of elements taken from this stream that match the given predicate.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;If this stream is ordered then the longest prefix is a contiguous
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * sequence of elements of this stream that match the given predicate.  The
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * first element of the sequence is the first element of this stream, and
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * the element immediately following the last element of the sequence does
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * not match the given predicate.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;If this stream is unordered, and some (but not all) elements of this
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * stream match the given predicate, then the behavior of this operation is
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * nondeterministic; it is free to take any subset of matching elements
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * (which includes the empty set).
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;Independent of whether this stream is ordered or unordered if all
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * elements of this stream match the given predicate then this operation
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * takes all elements (the result is the same as the input), or if no
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * elements of the stream match the given predicate then no elements are
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * taken (the result is an empty stream).
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;short-circuiting
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * stateful intermediate operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @implSpec
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * The default implementation obtains the {@link #spliterator() spliterator}
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * of this stream, wraps that spliterator so as to support the semantics
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * of this operation on traversal, and returns a new stream associated with
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * the wrapped spliterator.  The returned stream preserves the execution
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * characteristics of this stream (namely parallel or sequential execution
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * as per {@link #isParallel()}) but the wrapped spliterator may choose to
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * not support splitting.  When the returned stream is closed, the close
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * handlers for both the returned and this stream are invoked.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @apiNote
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * While {@code takeWhile()} is generally a cheap operation on sequential
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * stream pipelines, it can be quite expensive on ordered parallel
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * pipelines, since the operation is constrained to return not just any
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * valid prefix, but the longest prefix of elements in the encounter order.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Using an unordered stream source (such as {@link #generate(Supplier)}) or
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * removing the ordering constraint with {@link #unordered()} may result in
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * significant speedups of {@code takeWhile()} in parallel pipelines, if the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * semantics of your situation permit.  If consistency with encounter order
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * is required, and you are experiencing poor performance or memory
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * utilization with {@code takeWhile()} in parallel pipelines, switching to
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * sequential execution with {@link #sequential()} may improve performance.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param predicate a &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                  &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                  predicate to apply to elements to determine the longest
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                  prefix of elements.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @since 9
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>default</span> Stream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>takeWhile</span><span style=color:#f92672>(</span>Predicate<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>&gt;</span> predicate<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        Objects<span style=color:#f92672>.</span><span style=color:#a6e22e>requireNonNull</span><span style=color:#f92672>(</span>predicate<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Reuses the unordered spliterator, which, when encounter is present,
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// is safe to use as long as it configured not to split
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>return</span> StreamSupport<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> WhileOps<span style=color:#f92672>.</span><span style=color:#a6e22e>UnorderedWhileSpliterator</span><span style=color:#f92672>.</span><span style=color:#a6e22e>OfRef</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Taking</span><span style=color:#f92672>&lt;&gt;(</span>spliterator<span style=color:#f92672>(),</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>,</span> predicate<span style=color:#f92672>),</span>
</span></span><span style=display:flex><span>                isParallel<span style=color:#f92672>()).</span><span style=color:#a6e22e>onClose</span><span style=color:#f92672>(</span><span style=color:#66d9ef>this</span><span style=color:#f92672>::</span>close<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns, if this stream is ordered, a stream consisting of the remaining
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * elements of this stream after dropping the longest prefix of elements
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * that match the given predicate.  Otherwise returns, if this stream is
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * unordered, a stream consisting of the remaining elements of this stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * after dropping a subset of elements that match the given predicate.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;If this stream is ordered then the longest prefix is a contiguous
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * sequence of elements of this stream that match the given predicate.  The
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * first element of the sequence is the first element of this stream, and
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * the element immediately following the last element of the sequence does
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * not match the given predicate.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;If this stream is unordered, and some (but not all) elements of this
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * stream match the given predicate, then the behavior of this operation is
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * nondeterministic; it is free to drop any subset of matching elements
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * (which includes the empty set).
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;Independent of whether this stream is ordered or unordered if all
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * elements of this stream match the given predicate then this operation
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * drops all elements (the result is an empty stream), or if no elements of
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * the stream match the given predicate then no elements are dropped (the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * result is the same as the input).
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;stateful
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * intermediate operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @implSpec
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * The default implementation obtains the {@link #spliterator() spliterator}
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * of this stream, wraps that spliterator so as to support the semantics
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * of this operation on traversal, and returns a new stream associated with
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * the wrapped spliterator.  The returned stream preserves the execution
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * characteristics of this stream (namely parallel or sequential execution
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * as per {@link #isParallel()}) but the wrapped spliterator may choose to
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * not support splitting.  When the returned stream is closed, the close
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * handlers for both the returned and this stream are invoked.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @apiNote
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * While {@code dropWhile()} is generally a cheap operation on sequential
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * stream pipelines, it can be quite expensive on ordered parallel
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * pipelines, since the operation is constrained to return not just any
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * valid prefix, but the longest prefix of elements in the encounter order.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Using an unordered stream source (such as {@link #generate(Supplier)}) or
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * removing the ordering constraint with {@link #unordered()} may result in
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * significant speedups of {@code dropWhile()} in parallel pipelines, if the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * semantics of your situation permit.  If consistency with encounter order
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * is required, and you are experiencing poor performance or memory
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * utilization with {@code dropWhile()} in parallel pipelines, switching to
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * sequential execution with {@link #sequential()} may improve performance.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param predicate a &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                  &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                  predicate to apply to elements to determine the longest
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                  prefix of elements.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @since 9
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>default</span> Stream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>dropWhile</span><span style=color:#f92672>(</span>Predicate<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>&gt;</span> predicate<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        Objects<span style=color:#f92672>.</span><span style=color:#a6e22e>requireNonNull</span><span style=color:#f92672>(</span>predicate<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Reuses the unordered spliterator, which, when encounter is present,
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// is safe to use as long as it configured not to split
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>return</span> StreamSupport<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> WhileOps<span style=color:#f92672>.</span><span style=color:#a6e22e>UnorderedWhileSpliterator</span><span style=color:#f92672>.</span><span style=color:#a6e22e>OfRef</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Dropping</span><span style=color:#f92672>&lt;&gt;(</span>spliterator<span style=color:#f92672>(),</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>,</span> predicate<span style=color:#f92672>),</span>
</span></span><span style=display:flex><span>                isParallel<span style=color:#f92672>()).</span><span style=color:#a6e22e>onClose</span><span style=color:#f92672>(</span><span style=color:#66d9ef>this</span><span style=color:#f92672>::</span>close<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Performs an action for each element of this stream.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;terminal
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;The behavior of this operation is explicitly nondeterministic.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * For parallel stream pipelines, this operation does &lt;em&gt;not&lt;/em&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * guarantee to respect the encounter order of the stream, as doing so
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * would sacrifice the benefit of parallelism.  For any given element, the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * action may be performed at whatever time and in whatever thread the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * library chooses.  If the action accesses shared state, it is
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * responsible for providing the required synchronization.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param action a &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               non-interfering&lt;/a&gt; action to perform on the elements
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>forEach</span><span style=color:#f92672>(</span>Consumer<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>&gt;</span> action<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Performs an action for each element of this stream, in the encounter
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * order of the stream if the stream has a defined encounter order.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;terminal
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This operation processes the elements one at a time, in encounter
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * order if one exists.  Performing the action for one element
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;a href=&#34;../concurrent/package-summary.html#MemoryVisibility&#34;&gt;&lt;i&gt;happens-before&lt;/i&gt;&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * performing the action for subsequent elements, but for any given element,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * the action may be performed in whatever thread the library chooses.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param action a &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *               non-interfering&lt;/a&gt; action to perform on the elements
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @see #forEach(Consumer)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>forEachOrdered</span><span style=color:#f92672>(</span>Consumer<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>&gt;</span> action<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns an array containing the elements of this stream.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;terminal
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return an array, whose {@linkplain Class#getComponentType runtime component
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * type} is {@code Object}, containing the elements of this stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    Object<span style=color:#f92672>[]</span> <span style=color:#a6e22e>toArray</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns an array containing the elements of this stream, using the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * provided {@code generator} function to allocate the returned array, as
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * well as any additional arrays that might be required for a partitioned
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * execution or for resizing.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;terminal
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @apiNote
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * The generator function takes an integer, which is the size of the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * desired array, and produces an array of the desired size.  This can be
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * concisely expressed with an array constructor reference:
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     Person[] men = people.stream()
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                          .filter(p -&gt; p.getGender() == MALE)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                          .toArray(Person[]::new);
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param &lt;A&gt; the component type of the resulting array
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param generator a function which produces a new array of the desired
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                  type and the provided length
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return an array containing the elements in this stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @throws ArrayStoreException if the runtime type of any element of this
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *         stream is not assignable to the {@linkplain Class#getComponentType
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *         runtime component type} of the generated array
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span>A<span style=color:#f92672>&gt;</span> A<span style=color:#f92672>[]</span> <span style=color:#a6e22e>toArray</span><span style=color:#f92672>(</span>IntFunction<span style=color:#f92672>&lt;</span>A<span style=color:#f92672>[]&gt;</span> generator<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Performs a &lt;a href=&#34;package-summary.html#Reduction&#34;&gt;reduction&lt;/a&gt; on the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * elements of this stream, using the provided identity value and an
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;a href=&#34;package-summary.html#Associativity&#34;&gt;associative&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * accumulation function, and returns the reduced value.  This is equivalent
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * to:
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     T result = identity;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     for (T element : this stream)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *         result = accumulator.apply(result, element)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     return result;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * but is not constrained to execute sequentially.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;The {@code identity} value must be an identity for the accumulator
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * function. This means that for all {@code t},
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@code accumulator.apply(identity, t)} is equal to {@code t}.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * The {@code accumulator} function must be an
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;a href=&#34;package-summary.html#Associativity&#34;&gt;associative&lt;/a&gt; function.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;terminal
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @apiNote Sum, min, max, average, and string concatenation are all special
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * cases of reduction. Summing a stream of numbers can be expressed as:
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     Integer sum = integers.reduce(0, (a, b) -&gt; a+b);
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * or:
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     Integer sum = integers.reduce(0, Integer::sum);
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;While this may seem a more roundabout way to perform an aggregation
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * compared to simply mutating a running total in a loop, reduction
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operations parallelize more gracefully, without needing additional
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * synchronization and with greatly reduced risk of data races.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param identity the identity value for the accumulating function
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param accumulator an &lt;a href=&#34;package-summary.html#Associativity&#34;&gt;associative&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    function for combining two values
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the result of the reduction
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    T <span style=color:#a6e22e>reduce</span><span style=color:#f92672>(</span>T identity<span style=color:#f92672>,</span> BinaryOperator<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> accumulator<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Performs a &lt;a href=&#34;package-summary.html#Reduction&#34;&gt;reduction&lt;/a&gt; on the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * elements of this stream, using an
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;a href=&#34;package-summary.html#Associativity&#34;&gt;associative&lt;/a&gt; accumulation
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * function, and returns an {@code Optional} describing the reduced value,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * if any. This is equivalent to:
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     boolean foundAny = false;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     T result = null;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     for (T element : this stream) {
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *         if (!foundAny) {
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *             foundAny = true;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *             result = element;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *         }
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *         else
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *             result = accumulator.apply(result, element);
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     }
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     return foundAny ? Optional.of(result) : Optional.empty();
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * but is not constrained to execute sequentially.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;The {@code accumulator} function must be an
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;a href=&#34;package-summary.html#Associativity&#34;&gt;associative&lt;/a&gt; function.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;terminal
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param accumulator an &lt;a href=&#34;package-summary.html#Associativity&#34;&gt;associative&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    function for combining two values
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return an {@link Optional} describing the result of the reduction
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @throws NullPointerException if the result of the reduction is null
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @see #reduce(Object, BinaryOperator)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @see #min(Comparator)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @see #max(Comparator)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    Optional<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>reduce</span><span style=color:#f92672>(</span>BinaryOperator<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> accumulator<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Performs a &lt;a href=&#34;package-summary.html#Reduction&#34;&gt;reduction&lt;/a&gt; on the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * elements of this stream, using the provided identity, accumulation and
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * combining functions.  This is equivalent to:
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     U result = identity;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     for (T element : this stream)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *         result = accumulator.apply(result, element)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     return result;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * but is not constrained to execute sequentially.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;The {@code identity} value must be an identity for the combiner
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * function.  This means that for all {@code u}, {@code combiner(identity, u)}
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * is equal to {@code u}.  Additionally, the {@code combiner} function
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * must be compatible with the {@code accumulator} function; for all
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@code u} and {@code t}, the following must hold:
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     combiner.apply(u, accumulator.apply(identity, t)) == accumulator.apply(u, t)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;terminal
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @apiNote Many reductions using this form can be represented more simply
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * by an explicit combination of {@code map} and {@code reduce} operations.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * The {@code accumulator} function acts as a fused mapper and accumulator,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * which can sometimes be more efficient than separate mapping and reduction,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * such as when knowing the previously reduced value allows you to avoid
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * some computation.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param &lt;U&gt; The type of the result
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param identity the identity value for the combiner function
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param accumulator an &lt;a href=&#34;package-summary.html#Associativity&#34;&gt;associative&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    function for incorporating an additional element into a result
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param combiner an &lt;a href=&#34;package-summary.html#Associativity&#34;&gt;associative&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    function for combining two values, which must be
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    compatible with the accumulator function
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the result of the reduction
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @see #reduce(BinaryOperator)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @see #reduce(Object, BinaryOperator)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span>U<span style=color:#f92672>&gt;</span> U <span style=color:#a6e22e>reduce</span><span style=color:#f92672>(</span>U identity<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                 BiFunction<span style=color:#f92672>&lt;</span>U<span style=color:#f92672>,</span> <span style=color:#f92672>?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>,</span> U<span style=color:#f92672>&gt;</span> accumulator<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                 BinaryOperator<span style=color:#f92672>&lt;</span>U<span style=color:#f92672>&gt;</span> combiner<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Performs a &lt;a href=&#34;package-summary.html#MutableReduction&#34;&gt;mutable
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * reduction&lt;/a&gt; operation on the elements of this stream.  A mutable
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * reduction is one in which the reduced value is a mutable result container,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * such as an {@code ArrayList}, and elements are incorporated by updating
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * the state of the result rather than by replacing the result.  This
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * produces a result equivalent to:
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     R result = supplier.get();
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     for (T element : this stream)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *         accumulator.accept(result, element);
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     return result;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;Like {@link #reduce(Object, BinaryOperator)}, {@code collect} operations
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * can be parallelized without requiring additional synchronization.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;terminal
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @apiNote There are many existing classes in the JDK whose signatures are
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * well-suited for use with method references as arguments to {@code collect()}.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * For example, the following will accumulate strings into an {@code ArrayList}:
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     List&lt;String&gt; asList = stringStream.collect(ArrayList::new, ArrayList::add,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                                                ArrayList::addAll);
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;The following will take a stream of strings and concatenates them into a
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * single string:
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     String concat = stringStream.collect(StringBuilder::new, StringBuilder::append,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                                          StringBuilder::append)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                                 .toString();
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param &lt;R&gt; the type of the mutable result container
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param supplier a function that creates a new mutable result container.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                 For a parallel execution, this function may be called
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                 multiple times and must return a fresh value each time.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param accumulator an &lt;a href=&#34;package-summary.html#Associativity&#34;&gt;associative&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    function that must fold an element into a result
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    container.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param combiner an &lt;a href=&#34;package-summary.html#Associativity&#34;&gt;associative&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    function that accepts two partial result containers
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    and merges them, which must be compatible with the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    accumulator function.  The combiner function must fold
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    the elements from the second result container into the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                    first result container.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the result of the reduction
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span>R<span style=color:#f92672>&gt;</span> R <span style=color:#a6e22e>collect</span><span style=color:#f92672>(</span>Supplier<span style=color:#f92672>&lt;</span>R<span style=color:#f92672>&gt;</span> supplier<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                  BiConsumer<span style=color:#f92672>&lt;</span>R<span style=color:#f92672>,</span> <span style=color:#f92672>?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>&gt;</span> accumulator<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                  BiConsumer<span style=color:#f92672>&lt;</span>R<span style=color:#f92672>,</span> R<span style=color:#f92672>&gt;</span> combiner<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Performs a &lt;a href=&#34;package-summary.html#MutableReduction&#34;&gt;mutable
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * reduction&lt;/a&gt; operation on the elements of this stream using a
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@code Collector}.  A {@code Collector}
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * encapsulates the functions used as arguments to
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@link #collect(Supplier, BiConsumer, BiConsumer)}, allowing for reuse of
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * collection strategies and composition of collect operations such as
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * multiple-level grouping or partitioning.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;If the stream is parallel, and the {@code Collector}
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * is {@link Collector.Characteristics#CONCURRENT concurrent}, and
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * either the stream is unordered or the collector is
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@link Collector.Characteristics#UNORDERED unordered},
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * then a concurrent reduction will be performed (see {@link Collector} for
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * details on concurrent reduction.)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;terminal
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;When executed in parallel, multiple intermediate results may be
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * instantiated, populated, and merged so as to maintain isolation of
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * mutable data structures.  Therefore, even when executed in parallel
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * with non-thread-safe data structures (such as {@code ArrayList}), no
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * additional synchronization is needed for a parallel reduction.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @apiNote
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * The following will accumulate strings into an ArrayList:
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     List&lt;String&gt; asList = stringStream.collect(Collectors.toList());
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;The following will classify {@code Person} objects by city:
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     Map&lt;String, List&lt;Person&gt;&gt; peopleByCity
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *         = personStream.collect(Collectors.groupingBy(Person::getCity));
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;The following will classify {@code Person} objects by state and city,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * cascading two {@code Collector}s together:
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     Map&lt;String, Map&lt;String, List&lt;Person&gt;&gt;&gt; peopleByStateAndCity
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *         = personStream.collect(Collectors.groupingBy(Person::getState,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                                                      Collectors.groupingBy(Person::getCity)));
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param &lt;R&gt; the type of the result
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param &lt;A&gt; the intermediate accumulation type of the {@code Collector}
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param collector the {@code Collector} describing the reduction
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the result of the reduction
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @see #collect(Supplier, BiConsumer, BiConsumer)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @see Collectors
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span>R<span style=color:#f92672>,</span> A<span style=color:#f92672>&gt;</span> R <span style=color:#a6e22e>collect</span><span style=color:#f92672>(</span>Collector<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>,</span> A<span style=color:#f92672>,</span> R<span style=color:#f92672>&gt;</span> collector<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns the minimum element of this stream according to the provided
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@code Comparator}.  This is a special case of a
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;a href=&#34;package-summary.html#Reduction&#34;&gt;reduction&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;terminal operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param comparator a &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                   &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                   {@code Comparator} to compare elements of this stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return an {@code Optional} describing the minimum element of this stream,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * or an empty {@code Optional} if the stream is empty
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @throws NullPointerException if the minimum element is null
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    Optional<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>min</span><span style=color:#f92672>(</span>Comparator<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>&gt;</span> comparator<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns the maximum element of this stream according to the provided
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@code Comparator}.  This is a special case of a
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;a href=&#34;package-summary.html#Reduction&#34;&gt;reduction&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;terminal
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param comparator a &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                   &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                   {@code Comparator} to compare elements of this stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return an {@code Optional} describing the maximum element of this stream,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * or an empty {@code Optional} if the stream is empty
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @throws NullPointerException if the maximum element is null
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    Optional<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>max</span><span style=color:#f92672>(</span>Comparator<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>&gt;</span> comparator<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns the count of elements in this stream.  This is a special case of
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * a &lt;a href=&#34;package-summary.html#Reduction&#34;&gt;reduction&lt;/a&gt; and is
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * equivalent to:
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     return mapToLong(e -&gt; 1L).sum();
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;terminal operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @apiNote
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * An implementation may choose to not execute the stream pipeline (either
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * sequentially or in parallel) if it is capable of computing the count
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * directly from the stream source.  In such cases no source elements will
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * be traversed and no intermediate operations will be evaluated.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Behavioral parameters with side-effects, which are strongly discouraged
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * except for harmless cases such as debugging, may be affected.  For
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * example, consider the following stream:
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     List&lt;String&gt; l = Arrays.asList(&#34;A&#34;, &#34;B&#34;, &#34;C&#34;, &#34;D&#34;);
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     long count = l.stream().peek(System.out::println).count();
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * The number of elements covered by the stream source, a {@code List}, is
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * known and the intermediate operation, {@code peek}, does not inject into
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * or remove elements from the stream (as may be the case for
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@code flatMap} or {@code filter} operations).  Thus the count is the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * size of the {@code List} and there is no need to execute the pipeline
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * and, as a side-effect, print out the list elements.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the count of elements in this stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>long</span> <span style=color:#a6e22e>count</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns whether any elements of this stream match the provided
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * predicate.  May not evaluate the predicate on all elements if not
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * necessary for determining the result.  If the stream is empty then
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@code false} is returned and the predicate is not evaluated.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;short-circuiting
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * terminal operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @apiNote
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * This method evaluates the &lt;em&gt;existential quantification&lt;/em&gt; of the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * predicate over the elements of the stream (for some x P(x)).
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param predicate a &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                  &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                  predicate to apply to elements of this stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return {@code true} if any elements of the stream match the provided
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * predicate, otherwise {@code false}
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>anyMatch</span><span style=color:#f92672>(</span>Predicate<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>&gt;</span> predicate<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns whether all elements of this stream match the provided predicate.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * May not evaluate the predicate on all elements if not necessary for
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * determining the result.  If the stream is empty then {@code true} is
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * returned and the predicate is not evaluated.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;short-circuiting
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * terminal operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @apiNote
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * This method evaluates the &lt;em&gt;universal quantification&lt;/em&gt; of the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * predicate over the elements of the stream (for all x P(x)).  If the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * stream is empty, the quantification is said to be &lt;em&gt;vacuously
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * satisfied&lt;/em&gt; and is always {@code true} (regardless of P(x)).
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param predicate a &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                  &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                  predicate to apply to elements of this stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return {@code true} if either all elements of the stream match the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * provided predicate or the stream is empty, otherwise {@code false}
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>allMatch</span><span style=color:#f92672>(</span>Predicate<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>&gt;</span> predicate<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns whether no elements of this stream match the provided predicate.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * May not evaluate the predicate on all elements if not necessary for
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * determining the result.  If the stream is empty then {@code true} is
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * returned and the predicate is not evaluated.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;short-circuiting
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * terminal operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @apiNote
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * This method evaluates the &lt;em&gt;universal quantification&lt;/em&gt; of the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * negated predicate over the elements of the stream (for all x ~P(x)).  If
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * the stream is empty, the quantification is said to be vacuously satisfied
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * and is always {@code true}, regardless of P(x).
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param predicate a &lt;a href=&#34;package-summary.html#NonInterference&#34;&gt;non-interfering&lt;/a&gt;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                  &lt;a href=&#34;package-summary.html#Statelessness&#34;&gt;stateless&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                  predicate to apply to elements of this stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return {@code true} if either no elements of the stream match the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * provided predicate or the stream is empty, otherwise {@code false}
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>noneMatch</span><span style=color:#f92672>(</span>Predicate<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>&gt;</span> predicate<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns an {@link Optional} describing the first element of this stream,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * or an empty {@code Optional} if the stream is empty.  If the stream has
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * no encounter order, then any element may be returned.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;short-circuiting
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * terminal operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return an {@code Optional} describing the first element of this stream,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * or an empty {@code Optional} if the stream is empty
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @throws NullPointerException if the element selected is null
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    Optional<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findFirst</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns an {@link Optional} describing some element of the stream, or an
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * empty {@code Optional} if the stream is empty.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This is a &lt;a href=&#34;package-summary.html#StreamOps&#34;&gt;short-circuiting
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * terminal operation&lt;/a&gt;.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;The behavior of this operation is explicitly nondeterministic; it is
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * free to select any element in the stream.  This is to allow for maximal
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * performance in parallel operations; the cost is that multiple invocations
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * on the same source may not return the same result.  (If a stable result
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * is desired, use {@link #findFirst()} instead.)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return an {@code Optional} describing some element of this stream, or an
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * empty {@code Optional} if the stream is empty
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @throws NullPointerException if the element selected is null
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @see #findFirst()
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    Optional<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findAny</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Static factories
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns a builder for a {@code Stream}.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param &lt;T&gt; type of elements
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return a stream builder
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> Builder<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>builder</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> Streams<span style=color:#f92672>.</span><span style=color:#a6e22e>StreamBuilderImpl</span><span style=color:#f92672>&lt;&gt;();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns an empty sequential {@code Stream}.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param &lt;T&gt; the type of stream elements
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return an empty sequential stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> Stream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>empty</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> StreamSupport<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>(</span>Spliterators<span style=color:#f92672>.&lt;</span>T<span style=color:#f92672>&gt;</span>emptySpliterator<span style=color:#f92672>(),</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns a sequential {@code Stream} containing a single element.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param t the single element
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param &lt;T&gt; the type of stream elements
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return a singleton sequential stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> Stream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>T t<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> StreamSupport<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Streams<span style=color:#f92672>.</span><span style=color:#a6e22e>StreamBuilderImpl</span><span style=color:#f92672>&lt;&gt;(</span>t<span style=color:#f92672>),</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns a sequential {@code Stream} containing a single element, if
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * non-null, otherwise returns an empty {@code Stream}.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param t the single element
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param &lt;T&gt; the type of stream elements
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return a stream with a single element if the specified element
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *         is non-null, otherwise an empty stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @since 9
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> Stream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>ofNullable</span><span style=color:#f92672>(</span>T t<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> t <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>?</span> Stream<span style=color:#f92672>.</span><span style=color:#a6e22e>empty</span><span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>                         <span style=color:#f92672>:</span> StreamSupport<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Streams<span style=color:#f92672>.</span><span style=color:#a6e22e>StreamBuilderImpl</span><span style=color:#f92672>&lt;&gt;(</span>t<span style=color:#f92672>),</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns a sequential ordered stream whose elements are the specified values.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param &lt;T&gt; the type of stream elements
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param values the elements of the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the new stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SafeVarargs</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SuppressWarnings</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;varargs&#34;</span><span style=color:#f92672>)</span> <span style=color:#75715e>// Creating a stream from an array is safe
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> Stream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>T<span style=color:#f92672>...</span> values<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>(</span>values<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns an infinite sequential ordered {@code Stream} produced by iterative
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * application of a function {@code f} to an initial element {@code seed},
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * producing a {@code Stream} consisting of {@code seed}, {@code f(seed)},
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@code f(f(seed))}, etc.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;The first element (position {@code 0}) in the {@code Stream} will be
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * the provided {@code seed}.  For {@code n &gt; 0}, the element at position
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@code n}, will be the result of applying the function {@code f} to the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * element at position {@code n - 1}.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;The action of applying {@code f} for one element
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;a href=&#34;../concurrent/package-summary.html#MemoryVisibility&#34;&gt;&lt;i&gt;happens-before&lt;/i&gt;&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * the action of applying {@code f} for subsequent elements.  For any given
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * element the action may be performed in whatever thread the library
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * chooses.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param &lt;T&gt; the type of stream elements
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param seed the initial element
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param f a function to be applied to the previous element to produce
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *          a new element
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return a new sequential {@code Stream}
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> Stream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>iterate</span><span style=color:#f92672>(</span><span style=color:#66d9ef>final</span> T seed<span style=color:#f92672>,</span> <span style=color:#66d9ef>final</span> UnaryOperator<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> f<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        Objects<span style=color:#f92672>.</span><span style=color:#a6e22e>requireNonNull</span><span style=color:#f92672>(</span>f<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        Spliterator<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> spliterator <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Spliterators<span style=color:#f92672>.</span><span style=color:#a6e22e>AbstractSpliterator</span><span style=color:#f92672>&lt;&gt;(</span>Long<span style=color:#f92672>.</span><span style=color:#a6e22e>MAX_VALUE</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>               Spliterator<span style=color:#f92672>.</span><span style=color:#a6e22e>ORDERED</span> <span style=color:#f92672>|</span> Spliterator<span style=color:#f92672>.</span><span style=color:#a6e22e>IMMUTABLE</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            T prev<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>boolean</span> started<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>tryAdvance</span><span style=color:#f92672>(</span>Consumer<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>&gt;</span> action<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                Objects<span style=color:#f92672>.</span><span style=color:#a6e22e>requireNonNull</span><span style=color:#f92672>(</span>action<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                T t<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>started<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                    t <span style=color:#f92672>=</span> f<span style=color:#f92672>.</span><span style=color:#a6e22e>apply</span><span style=color:#f92672>(</span>prev<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    t <span style=color:#f92672>=</span> seed<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                    started <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>                action<span style=color:#f92672>.</span><span style=color:#a6e22e>accept</span><span style=color:#f92672>(</span>prev <span style=color:#f92672>=</span> t<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>};</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> StreamSupport<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>(</span>spliterator<span style=color:#f92672>,</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns a sequential ordered {@code Stream} produced by iterative
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * application of the given {@code next} function to an initial element,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * conditioned on satisfying the given {@code hasNext} predicate.  The
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * stream terminates as soon as the {@code hasNext} predicate returns false.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;{@code Stream.iterate} should produce the same sequence of elements as
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * produced by the corresponding for-loop:
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     for (T index=seed; hasNext.test(index); index = next.apply(index)) {
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *         ...
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     }
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;The resulting sequence may be empty if the {@code hasNext} predicate
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * does not hold on the seed value.  Otherwise the first element will be the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * supplied {@code seed} value, the next element (if present) will be the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * result of applying the {@code next} function to the {@code seed} value,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * and so on iteratively until the {@code hasNext} predicate indicates that
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * the stream should terminate.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;The action of applying the {@code hasNext} predicate to an element
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;a href=&#34;../concurrent/package-summary.html#MemoryVisibility&#34;&gt;&lt;i&gt;happens-before&lt;/i&gt;&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * the action of applying the {@code next} function to that element.  The
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * action of applying the {@code next} function for one element
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;i&gt;happens-before&lt;/i&gt; the action of applying the {@code hasNext}
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * predicate for subsequent elements.  For any given element an action may
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * be performed in whatever thread the library chooses.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param &lt;T&gt; the type of stream elements
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param seed the initial element
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param hasNext a predicate to apply to elements to determine when the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *                stream must terminate.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param next a function to be applied to the previous element to produce
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *             a new element
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return a new sequential {@code Stream}
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @since 9
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> Stream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>iterate</span><span style=color:#f92672>(</span>T seed<span style=color:#f92672>,</span> Predicate<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>&gt;</span> hasNext<span style=color:#f92672>,</span> UnaryOperator<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> next<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        Objects<span style=color:#f92672>.</span><span style=color:#a6e22e>requireNonNull</span><span style=color:#f92672>(</span>next<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        Objects<span style=color:#f92672>.</span><span style=color:#a6e22e>requireNonNull</span><span style=color:#f92672>(</span>hasNext<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        Spliterator<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> spliterator <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Spliterators<span style=color:#f92672>.</span><span style=color:#a6e22e>AbstractSpliterator</span><span style=color:#f92672>&lt;&gt;(</span>Long<span style=color:#f92672>.</span><span style=color:#a6e22e>MAX_VALUE</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>               Spliterator<span style=color:#f92672>.</span><span style=color:#a6e22e>ORDERED</span> <span style=color:#f92672>|</span> Spliterator<span style=color:#f92672>.</span><span style=color:#a6e22e>IMMUTABLE</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            T prev<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>boolean</span> started<span style=color:#f92672>,</span> finished<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>tryAdvance</span><span style=color:#f92672>(</span>Consumer<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>&gt;</span> action<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                Objects<span style=color:#f92672>.</span><span style=color:#a6e22e>requireNonNull</span><span style=color:#f92672>(</span>action<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>finished<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                T t<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>started<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                    t <span style=color:#f92672>=</span> next<span style=color:#f92672>.</span><span style=color:#a6e22e>apply</span><span style=color:#f92672>(</span>prev<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    t <span style=color:#f92672>=</span> seed<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                    started <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>hasNext<span style=color:#f92672>.</span><span style=color:#a6e22e>test</span><span style=color:#f92672>(</span>t<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    prev <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                    finished <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>                action<span style=color:#f92672>.</span><span style=color:#a6e22e>accept</span><span style=color:#f92672>(</span>prev <span style=color:#f92672>=</span> t<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>forEachRemaining</span><span style=color:#f92672>(</span>Consumer<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> T<span style=color:#f92672>&gt;</span> action<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                Objects<span style=color:#f92672>.</span><span style=color:#a6e22e>requireNonNull</span><span style=color:#f92672>(</span>action<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>finished<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>return</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                finished <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                T t <span style=color:#f92672>=</span> started <span style=color:#f92672>?</span> next<span style=color:#f92672>.</span><span style=color:#a6e22e>apply</span><span style=color:#f92672>(</span>prev<span style=color:#f92672>)</span> <span style=color:#f92672>:</span> seed<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                prev <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>while</span> <span style=color:#f92672>(</span>hasNext<span style=color:#f92672>.</span><span style=color:#a6e22e>test</span><span style=color:#f92672>(</span>t<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    action<span style=color:#f92672>.</span><span style=color:#a6e22e>accept</span><span style=color:#f92672>(</span>t<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                    t <span style=color:#f92672>=</span> next<span style=color:#f92672>.</span><span style=color:#a6e22e>apply</span><span style=color:#f92672>(</span>t<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>};</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> StreamSupport<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>(</span>spliterator<span style=color:#f92672>,</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Returns an infinite sequential unordered stream where each element is
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * generated by the provided {@code Supplier}.  This is suitable for
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * generating constant streams, streams of random elements, etc.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param &lt;T&gt; the type of stream elements
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param s the {@code Supplier} of generated elements
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return a new infinite sequential unordered {@code Stream}
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> Stream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>generate</span><span style=color:#f92672>(</span>Supplier<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>extends</span> T<span style=color:#f92672>&gt;</span> s<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        Objects<span style=color:#f92672>.</span><span style=color:#a6e22e>requireNonNull</span><span style=color:#f92672>(</span>s<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> StreamSupport<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> StreamSpliterators<span style=color:#f92672>.</span><span style=color:#a6e22e>InfiniteSupplyingSpliterator</span><span style=color:#f92672>.</span><span style=color:#a6e22e>OfRef</span><span style=color:#f92672>&lt;&gt;(</span>Long<span style=color:#f92672>.</span><span style=color:#a6e22e>MAX_VALUE</span><span style=color:#f92672>,</span> s<span style=color:#f92672>),</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Creates a lazily concatenated stream whose elements are all the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * elements of the first stream followed by all the elements of the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * second stream.  The resulting stream is ordered if both
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * of the input streams are ordered, and parallel if either of the input
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * streams is parallel.  When the resulting stream is closed, the close
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * handlers for both input streams are invoked.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;This method operates on the two input streams and binds each stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * to its source.  As a result subsequent modifications to an input stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * source may not be reflected in the concatenated stream result.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @implNote
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Use caution when constructing streams from repeated concatenation.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * Accessing an element of a deeply concatenated stream can result in deep
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * call chains, or even {@code StackOverflowError}.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;Subsequent changes to the sequential/parallel execution mode of the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * returned stream are not guaranteed to be propagated to the input streams.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @apiNote
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * To preserve optimization opportunities this method binds each stream to
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * its source and accepts only two streams as parameters.  For example, the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * exact size of the concatenated stream source can be computed if the exact
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * size of each input stream source is known.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * To concatenate more streams without binding, or without nested calls to
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * this method, try creating a stream of streams and flat-mapping with the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * identity function, for example:
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *     Stream&lt;T&gt; concat = Stream.of(s1, s2, s3, s4).flatMap(s -&gt; s);
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param &lt;T&gt; The type of stream elements
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param a the first stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param b the second stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return the concatenation of the two input streams
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> Stream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>concat</span><span style=color:#f92672>(</span>Stream<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>extends</span> T<span style=color:#f92672>&gt;</span> a<span style=color:#f92672>,</span> Stream<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>extends</span> T<span style=color:#f92672>&gt;</span> b<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        Objects<span style=color:#f92672>.</span><span style=color:#a6e22e>requireNonNull</span><span style=color:#f92672>(</span>a<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        Objects<span style=color:#f92672>.</span><span style=color:#a6e22e>requireNonNull</span><span style=color:#f92672>(</span>b<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@SuppressWarnings</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;unchecked&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        Spliterator<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> split <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Streams<span style=color:#f92672>.</span><span style=color:#a6e22e>ConcatSpliterator</span><span style=color:#f92672>.</span><span style=color:#a6e22e>OfRef</span><span style=color:#f92672>&lt;&gt;(</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>(</span>Spliterator<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;)</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>spliterator</span><span style=color:#f92672>(),</span> <span style=color:#f92672>(</span>Spliterator<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;)</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>spliterator</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        Stream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> stream <span style=color:#f92672>=</span> StreamSupport<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>(</span>split<span style=color:#f92672>,</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>isParallel</span><span style=color:#f92672>()</span> <span style=color:#f92672>||</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>isParallel</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> stream<span style=color:#f92672>.</span><span style=color:#a6e22e>onClose</span><span style=color:#f92672>(</span>Streams<span style=color:#f92672>.</span><span style=color:#a6e22e>composedClose</span><span style=color:#f92672>(</span>a<span style=color:#f92672>,</span> b<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * A mutable builder for a {@code Stream}.  This allows the creation of a
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@code Stream} by generating elements individually and adding them to the
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@code Builder} (without the copying overhead that comes from using
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * an {@code ArrayList} as a temporary buffer.)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * &lt;p&gt;A stream builder has a lifecycle, which starts in a building
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * phase, during which elements can be added, and then transitions to a built
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * phase, after which elements may not be added.  The built phase begins
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * when the {@link #build()} method is called, which creates an ordered
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * {@code Stream} whose elements are the elements that were added to the stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * builder, in the order they were added.
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param &lt;T&gt; the type of stream elements
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @see Stream#builder()
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @since 1.8
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Builder</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>extends</span> Consumer<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * Adds an element to the stream being built.
</span></span></span><span style=display:flex><span><span style=color:#75715e>         *
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @throws IllegalStateException if the builder has already transitioned to
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * the built state
</span></span></span><span style=display:flex><span><span style=color:#75715e>         */</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>accept</span><span style=color:#f92672>(</span>T t<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * Adds an element to the stream being built.
</span></span></span><span style=display:flex><span><span style=color:#75715e>         *
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @implSpec
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * The default implementation behaves as if:
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * &lt;pre&gt;{@code
</span></span></span><span style=display:flex><span><span style=color:#75715e>         *     accept(t)
</span></span></span><span style=display:flex><span><span style=color:#75715e>         *     return this;
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * }&lt;/pre&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>         *
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @param t the element to add
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @return {@code this} builder
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @throws IllegalStateException if the builder has already transitioned to
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * the built state
</span></span></span><span style=display:flex><span><span style=color:#75715e>         */</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>default</span> Builder<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>T t<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            accept<span style=color:#f92672>(</span>t<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * Builds the stream, transitioning this builder to the built state.
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * An {@code IllegalStateException} is thrown if there are further attempts
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * to operate on the builder after it has entered the built state.
</span></span></span><span style=display:flex><span><span style=color:#75715e>         *
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @return the built stream
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @throws IllegalStateException if the builder has already transitioned to
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * the built state
</span></span></span><span style=display:flex><span><span style=color:#75715e>         */</span>
</span></span><span style=display:flex><span>        Stream<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>build</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div></article><footer class=post-footer><ul class=post-tags><li><a href=https://willxwu.github.io/tags/java><span class=tag>Java</span></a></li><li><a href=https://willxwu.github.io/tags/javase><span class=tag>Javase</span></a></li><li><a href=https://willxwu.github.io/tags/jdk1.8><span class=tag>Jdk1.8</span></a></li><li><a href=https://willxwu.github.io/tags/java8><span class=tag>Java8</span></a></li><li><a href=https://willxwu.github.io/tags/%E6%96%B0%E7%89%B9%E6%80%A7><span class=tag>新特性</span></a></li><li><a href=https://willxwu.github.io/tags/stream%E6%BA%90%E7%A0%81><span class=tag>Stream源码</span></a></li><li><a href=https://willxwu.github.io/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3><span class=tag>函数式接口</span></a></li></ul><p class=post-copyright>© This post is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License，please give source if you wish to quote or reproduce.This post was published <strong>426</strong> days ago, content in the post may be inaccurate, even wrong now, please take risk yourself.</p></footer><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//yanxizhu.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section><footer class=site-footer><p>© 2017-2023 Come Back</p><p>Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> with theme <a href=https://github.com/laozhu/hugo-nuo target=_blank rel=noopener>Nuo</a>.</p></footer><script src=https://cdn.jsdelivr.net/npm/smooth-scroll@15.0.0/dist/smooth-scroll.min.js></script>
<script async src=https://cdn.jsdelivr.net/npm/video.js@7.3.0/dist/video.min.js></script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type=text/x-mathjax-config>
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\\[','\\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { equationNumbers: { autoNumber: "AMS" },
      extensions: ["AMSmath.js", "AMSsymbols.js"] }
    },
  });
</script><script type=text/x-mathjax-config>
  // Fix <code> tags after MathJax finishes running. This is a
  // hack to overcome a shortcoming of Markdown. Discussion at
  // https://github.com/mojombo/jekyll/issues/199
  MathJax.Hub.Queue(() => {
    MathJax.Hub.getAllJax().map(v => v.SourceElement().parentNode.className += ' has-jax');
  });
</script><script src=https://willxwu.github.io/scripts/index.min.js></script>
<script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(function(){console.log("[ServiceWorker] Registered")})</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-XXXXXXXX-X","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>