<!doctype html><html lang=en-us><head><title>// willxwu</title><link rel="shortcut icon" href=/favicon.ico><meta charset=utf-8><meta name=generator content="Hugo 0.110.0"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="John Doe"><meta name=description content><link rel=stylesheet href=https://willxwu.github.io/css/main.min.68e582a4d4ed824d6b7e3b5b37cae47eb3779bd631046379d0e68b38230cc3e2.css><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="Nginx配置优化 1、隐藏nginx版本信息 #不显示nginx版本 server_tokens off 2、Buffers缓存 另一个很重要的参数为buffer，如果buffer太小，Nginx会不停的写一些临时文件，这样会导致磁盘不停的去读写。
client_body_buffer_size 10K; client_header_buffer_size 1k; client_max_body_size 8m; large_client_header_buffers 2 1k; client_body_buffer_size:允许客户端请求的最大单个文件字节数 client_header_buffer_size:用于设置客户端请求的Header头缓冲区大小，大部分情况1KB大小足够 client_max_body_size:设置客户端能够上传的文件大小，默认为1m large_client_header_buffers:该指令用于设置客户端请求的Header头缓冲区大小 3、开启Gzip压缩 #开启Gzip压缩 gzip on; #压缩等级 1-9 等级越高，压缩效果越好，节约宽带，但CPU消耗大 gzip_comp_level 2; #最小压缩文件大小 gzip_min_length 1000; #根据某些头部决定是否压缩， gzip_proxied expired no-cache no-store private auth; #压缩类型，默认就已经包含text/html，所以下面就不用再写了，写上去也不会有问题，但是会有一个warn。 gzip_types text/plain application/x-javascript text/xml text/css application/xml; #是否传输gzip压缩标志 gzip_vary on; 4、开启高效传输模式 #开启高效传输模式。 sendfile on; #该指令必须在sendfile打开的状态下才会生效，主要是用来提升网络包的传输'效率' tcp_nopush on; #该指令必须在keep-alive连接开启的情况下才生效，来提高网络包传输的'实时性' tcp_nodelay on; 5、FastCGI配置 相关参数是为了改善网站的性能：减少资源占用，提高访问速度。
#为FastCGI缓存指定一个文件路径、目录结构等级、关键字区域存储时间和非活动删除时间。 fastcgi_cache_path /usr/local/nginx/fastcgi_cache levels=1:2 keys_zone=TEST:10m inactive=5m; #指定连接到后端FastCGI的超时时间。 fastcgi_connect_timeout 300; #指定向FastCGI传送请求的超时时间，这个值是已经完成两次握手后向FastCGI传送请求的超时时间。 fastcgi_send_timeout 300; #指定接收FastCGI应答的超时时间，这个值是已经完成两次握手后接收FastCGI应答的超时时间。 fastcgi_read_timeout 300; #用于指定读取FastCGI应答第一部分需要用多大的缓冲区，这个值表示将使用1个64KB的缓冲区读取应答的第一部分（应答头），可以设置为fastcgi_buffers选项指定的缓冲区大小。 fastcgi_buffer_size 64k; #指定本地需要用多少和多大的缓冲区来缓冲FastCGI的应答请求。如果一个PHP脚本所产生的页面大小为256KB，那么会为其分配4个64KB的缓冲区来缓存；如果页面大小大于256KB，那么大于256KB的部分会缓存到fastcgi_temp指定的路径中，但是这并不是好方法，因为内存中的数据处理速度要快于硬盘。一般这个值应该为站点中PHP脚本所产生的页面大小的中间值，如果站点大部分脚本所产生的页面大小为256KB，那么可以把这个值设置为“16 16k”、“4 64k”等。 fastcgi_buffers 4 64k; #默认值是fastcgi_buffers的两倍。 fastcgi_busy_buffers_size 128k; #表示在写入缓存文件时使用多大的数据块，默认值是fastcgi_buffers的两倍。 fastcgi_temp_file_write_size 128k; #表示开启FastCGI缓存并为其指定一个名称。开启缓存非常有用，可以有效降低CPU的负载，并且防止502错误的发生，但是开启缓存也会引起很多问题，要视具体情况而定。 fastcgi_cache TEST; #用来指定应答代码的缓存时间，实例中的值表示将200和302应答缓存一个小时，将301应答缓存1天，其他应答均缓存1分 fastcgi_cache_valid 200 302 1h; fastcgi_cache_valid 301 1d; fastcgi_cache_valid any 1m; 6、超时配置 #客户端连接超时时间，单位是秒 keepalive_timeout 60; #客户端请求头读取超时时间 client_header_timeout 10; #设置客户端请求主体读取超时时间 client_body_timeout 10; #响应客户端超时时间 send_timeout 10; 7、expires缓存配置 #对于图片，通常过期时间可以设置为一个月 location ~ \."><meta property="og:title" content><meta property="og:description" content="Nginx配置优化 1、隐藏nginx版本信息 #不显示nginx版本 server_tokens off 2、Buffers缓存 另一个很重要的参数为buffer，如果buffer太小，Nginx会不停的写一些临时文件，这样会导致磁盘不停的去读写。
client_body_buffer_size 10K; client_header_buffer_size 1k; client_max_body_size 8m; large_client_header_buffers 2 1k; client_body_buffer_size:允许客户端请求的最大单个文件字节数 client_header_buffer_size:用于设置客户端请求的Header头缓冲区大小，大部分情况1KB大小足够 client_max_body_size:设置客户端能够上传的文件大小，默认为1m large_client_header_buffers:该指令用于设置客户端请求的Header头缓冲区大小 3、开启Gzip压缩 #开启Gzip压缩 gzip on; #压缩等级 1-9 等级越高，压缩效果越好，节约宽带，但CPU消耗大 gzip_comp_level 2; #最小压缩文件大小 gzip_min_length 1000; #根据某些头部决定是否压缩， gzip_proxied expired no-cache no-store private auth; #压缩类型，默认就已经包含text/html，所以下面就不用再写了，写上去也不会有问题，但是会有一个warn。 gzip_types text/plain application/x-javascript text/xml text/css application/xml; #是否传输gzip压缩标志 gzip_vary on; 4、开启高效传输模式 #开启高效传输模式。 sendfile on; #该指令必须在sendfile打开的状态下才会生效，主要是用来提升网络包的传输'效率' tcp_nopush on; #该指令必须在keep-alive连接开启的情况下才生效，来提高网络包传输的'实时性' tcp_nodelay on; 5、FastCGI配置 相关参数是为了改善网站的性能：减少资源占用，提高访问速度。
#为FastCGI缓存指定一个文件路径、目录结构等级、关键字区域存储时间和非活动删除时间。 fastcgi_cache_path /usr/local/nginx/fastcgi_cache levels=1:2 keys_zone=TEST:10m inactive=5m; #指定连接到后端FastCGI的超时时间。 fastcgi_connect_timeout 300; #指定向FastCGI传送请求的超时时间，这个值是已经完成两次握手后向FastCGI传送请求的超时时间。 fastcgi_send_timeout 300; #指定接收FastCGI应答的超时时间，这个值是已经完成两次握手后接收FastCGI应答的超时时间。 fastcgi_read_timeout 300; #用于指定读取FastCGI应答第一部分需要用多大的缓冲区，这个值表示将使用1个64KB的缓冲区读取应答的第一部分（应答头），可以设置为fastcgi_buffers选项指定的缓冲区大小。 fastcgi_buffer_size 64k; #指定本地需要用多少和多大的缓冲区来缓冲FastCGI的应答请求。如果一个PHP脚本所产生的页面大小为256KB，那么会为其分配4个64KB的缓冲区来缓存；如果页面大小大于256KB，那么大于256KB的部分会缓存到fastcgi_temp指定的路径中，但是这并不是好方法，因为内存中的数据处理速度要快于硬盘。一般这个值应该为站点中PHP脚本所产生的页面大小的中间值，如果站点大部分脚本所产生的页面大小为256KB，那么可以把这个值设置为“16 16k”、“4 64k”等。 fastcgi_buffers 4 64k; #默认值是fastcgi_buffers的两倍。 fastcgi_busy_buffers_size 128k; #表示在写入缓存文件时使用多大的数据块，默认值是fastcgi_buffers的两倍。 fastcgi_temp_file_write_size 128k; #表示开启FastCGI缓存并为其指定一个名称。开启缓存非常有用，可以有效降低CPU的负载，并且防止502错误的发生，但是开启缓存也会引起很多问题，要视具体情况而定。 fastcgi_cache TEST; #用来指定应答代码的缓存时间，实例中的值表示将200和302应答缓存一个小时，将301应答缓存1天，其他应答均缓存1分 fastcgi_cache_valid 200 302 1h; fastcgi_cache_valid 301 1d; fastcgi_cache_valid any 1m; 6、超时配置 #客户端连接超时时间，单位是秒 keepalive_timeout 60; #客户端请求头读取超时时间 client_header_timeout 10; #设置客户端请求主体读取超时时间 client_body_timeout 10; #响应客户端超时时间 send_timeout 10; 7、expires缓存配置 #对于图片，通常过期时间可以设置为一个月 location ~ \."><meta property="og:type" content="article"><meta property="og:url" content="https://willxwu.github.io/posts/nginx%E9%85%8D%E7%BD%AE%E4%BC%98%E5%8C%96/"><meta property="article:section" content="posts"></head><body><header class=app-header><a href=https://willxwu.github.io/><img class=app-header-avatar src=/avatar.jpg alt="John Doe"></a><h1>willxwu</h1><nav class=app-header-menu><a class=app-header-menu-item href=/about/>about</a>
-
<a class=app-header-menu-item href=/>home</a>
-
<a class=app-header-menu-item href=/link/>link</a>
-
<a class=app-header-menu-item href=/tags/>tags</a></nav><p>I write code and I take care about my privacy // Co-founder @ Owaka // Golang lover // Open source enthusiast</p><div class=app-header-social><a target=_blank href=https://github.com/willxwu rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a target=_blank href=https://twitter.com/willxwu rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter"><title>twitter</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></div></header><main class=app-container><article class=post><header class=post-header><h1 class=post-title></h1><div class=post-meta><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Jan 1, 0001</div><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>1 min read</div></div></header><div class=post-content><h1 id=nginx配置优化>Nginx配置优化</h1><h1 id=1隐藏nginx版本信息>1、隐藏nginx版本信息</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nginx data-lang=nginx><span style=display:flex><span><span style=color:#75715e>#不显示nginx版本
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>server_tokens</span> <span style=color:#66d9ef>off</span>
</span></span></code></pre></div><h1 id=2buffers缓存>2、Buffers缓存</h1><p>另一个很重要的参数为buffer，如果buffer太小，Nginx会不停的写一些临时文件，这样会导致磁盘不停的去读写。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nginx data-lang=nginx><span style=display:flex><span><span style=color:#66d9ef>client_body_buffer_size</span> <span style=color:#e6db74>10K</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>client_header_buffer_size</span> <span style=color:#ae81ff>1k</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>client_max_body_size</span> <span style=color:#ae81ff>8m</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>large_client_header_buffers</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>1k</span>;
</span></span></code></pre></div><ul><li>client_body_buffer_size:允许客户端请求的最大单个文件字节数</li><li>client_header_buffer_size:用于设置客户端请求的Header头缓冲区大小，大部分情况1KB大小足够</li><li>client_max_body_size:设置客户端能够上传的文件大小，默认为1m</li><li>large_client_header_buffers:该指令用于设置客户端请求的Header头缓冲区大小</li></ul><h1 id=3开启gzip压缩>3、开启Gzip压缩</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nginx data-lang=nginx><span style=display:flex><span>	<span style=color:#75715e>#开启Gzip压缩
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>gzip</span>             <span style=color:#66d9ef>on</span>;
</span></span><span style=display:flex><span>	<span style=color:#75715e>#压缩等级 1-9 等级越高，压缩效果越好，节约宽带，但CPU消耗大
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>gzip_comp_level</span>  <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>	<span style=color:#75715e>#最小压缩文件大小
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>gzip_min_length</span>  <span style=color:#ae81ff>1000</span>;
</span></span><span style=display:flex><span>	<span style=color:#75715e>#根据某些头部决定是否压缩，
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>gzip_proxied</span>     <span style=color:#e6db74>expired</span> <span style=color:#e6db74>no-cache</span> <span style=color:#e6db74>no-store</span> <span style=color:#e6db74>private</span> <span style=color:#e6db74>auth</span>;
</span></span><span style=display:flex><span>	<span style=color:#75715e>#压缩类型，默认就已经包含text/html，所以下面就不用再写了，写上去也不会有问题，但是会有一个warn。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>gzip_types</span>       <span style=color:#e6db74>text/plain</span> <span style=color:#e6db74>application/x-javascript</span> <span style=color:#e6db74>text/xml</span> <span style=color:#e6db74>text/css</span> <span style=color:#e6db74>application/xml</span>;
</span></span><span style=display:flex><span>	<span style=color:#75715e>#是否传输gzip压缩标志
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>gzip_vary</span> <span style=color:#66d9ef>on</span>;
</span></span></code></pre></div><h1 id=4开启高效传输模式>4、开启高效传输模式</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nginx data-lang=nginx><span style=display:flex><span>	<span style=color:#75715e>#开启高效传输模式。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>sendfile</span>        <span style=color:#66d9ef>on</span>;
</span></span><span style=display:flex><span>	<span style=color:#75715e>#该指令必须在sendfile打开的状态下才会生效，主要是用来提升网络包的传输&#39;效率&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>tcp_nopush</span> <span style=color:#66d9ef>on</span>;
</span></span><span style=display:flex><span>	<span style=color:#75715e>#该指令必须在keep-alive连接开启的情况下才生效，来提高网络包传输的&#39;实时性&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>tcp_nodelay</span> <span style=color:#66d9ef>on</span>;
</span></span></code></pre></div><h1 id=5fastcgi配置>5、FastCGI配置</h1><p>相关参数是为了改善网站的性能：减少资源占用，提高访问速度。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nginx data-lang=nginx><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#为FastCGI缓存指定一个文件路径、目录结构等级、关键字区域存储时间和非活动删除时间。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>fastcgi_cache_path</span> <span style=color:#e6db74>/usr/local/nginx/fastcgi_cache</span> <span style=color:#e6db74>levels=1:2</span> <span style=color:#e6db74>keys_zone=TEST:10m</span> <span style=color:#e6db74>inactive=5m</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>#指定连接到后端FastCGI的超时时间。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>fastcgi_connect_timeout</span> <span style=color:#ae81ff>300</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>#指定向FastCGI传送请求的超时时间，这个值是已经完成两次握手后向FastCGI传送请求的超时时间。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>fastcgi_send_timeout</span> <span style=color:#ae81ff>300</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>#指定接收FastCGI应答的超时时间，这个值是已经完成两次握手后接收FastCGI应答的超时时间。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>fastcgi_read_timeout</span> <span style=color:#ae81ff>300</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>#用于指定读取FastCGI应答第一部分需要用多大的缓冲区，这个值表示将使用1个64KB的缓冲区读取应答的第一部分（应答头），可以设置为fastcgi_buffers选项指定的缓冲区大小。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>fastcgi_buffer_size</span> <span style=color:#ae81ff>64k</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>#指定本地需要用多少和多大的缓冲区来缓冲FastCGI的应答请求。如果一个PHP脚本所产生的页面大小为256KB，那么会为其分配4个64KB的缓冲区来缓存；如果页面大小大于256KB，那么大于256KB的部分会缓存到fastcgi_temp指定的路径中，但是这并不是好方法，因为内存中的数据处理速度要快于硬盘。一般这个值应该为站点中PHP脚本所产生的页面大小的中间值，如果站点大部分脚本所产生的页面大小为256KB，那么可以把这个值设置为“16 16k”、“4 64k”等。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>fastcgi_buffers</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>64k</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>#默认值是fastcgi_buffers的两倍。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>fastcgi_busy_buffers_size</span> <span style=color:#ae81ff>128k</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>#表示在写入缓存文件时使用多大的数据块，默认值是fastcgi_buffers的两倍。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>fastcgi_temp_file_write_size</span> <span style=color:#ae81ff>128k</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>#表示开启FastCGI缓存并为其指定一个名称。开启缓存非常有用，可以有效降低CPU的负载，并且防止502错误的发生，但是开启缓存也会引起很多问题，要视具体情况而定。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>fastcgi_cache</span> <span style=color:#e6db74>TEST</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>#用来指定应答代码的缓存时间，实例中的值表示将200和302应答缓存一个小时，将301应答缓存1天，其他应答均缓存1分
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>fastcgi_cache_valid</span> <span style=color:#ae81ff>200</span> <span style=color:#ae81ff>302</span> <span style=color:#e6db74>1h</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>fastcgi_cache_valid</span> <span style=color:#ae81ff>301</span> <span style=color:#e6db74>1d</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>fastcgi_cache_valid</span> <span style=color:#e6db74>any</span> <span style=color:#ae81ff>1m</span>;
</span></span></code></pre></div><h1 id=6超时配置>6、超时配置</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nginx data-lang=nginx><span style=display:flex><span>	<span style=color:#75715e>#客户端连接超时时间，单位是秒
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>keepalive_timeout</span> <span style=color:#ae81ff>60</span>;
</span></span><span style=display:flex><span>    <span style=color:#75715e>#客户端请求头读取超时时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>client_header_timeout</span> <span style=color:#ae81ff>10</span>;
</span></span><span style=display:flex><span>    <span style=color:#75715e>#设置客户端请求主体读取超时时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>client_body_timeout</span> <span style=color:#ae81ff>10</span>;
</span></span><span style=display:flex><span>    <span style=color:#75715e>#响应客户端超时时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>send_timeout</span> <span style=color:#ae81ff>10</span>;
</span></span></code></pre></div><h1 id=7expires缓存配置>7、expires缓存配置</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nginx data-lang=nginx><span style=display:flex><span>	<span style=color:#75715e>#对于图片，通常过期时间可以设置为一个月
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>location</span> ~ <span style=color:#e6db74>\.(gif|jpg|jpeg|png|bmp|ico)$</span> {
</span></span><span style=display:flex><span>        <span style=color:#f92672>expires</span> <span style=color:#e6db74>30d</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#75715e>#对js/css,通常过期时间设置为1周
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>location</span> ~<span style=color:#e6db74>*</span> <span style=color:#e6db74>\.(js|css)</span>$ {
</span></span><span style=display:flex><span>        <span style=color:#f92672>expires</span> <span style=color:#e6db74>7d</span>;
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div></div><div class=post-footer></div></article></main></body></html>