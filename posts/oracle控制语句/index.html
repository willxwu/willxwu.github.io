<!doctype html><html lang=en-us><head><title>// willxwu</title><link rel="shortcut icon" href=/favicon.ico><meta charset=utf-8><meta name=generator content="Hugo 0.111.3"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="John Doe"><meta name=description content><link rel=stylesheet href=https://willxwu.github.io/css/main.min.68e582a4d4ed824d6b7e3b5b37cae47eb3779bd631046379d0e68b38230cc3e2.css><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="一、Oracle控制语句 1、编写语句 --写了才会输出 set serverout on; --开始语句 begin --这里面开始写语句块 dbms_output.put_line('Hello'); --注意&#34; ; &#34;不要完了 --控制语句结束 end; --在对话框执行时，需要输入/ 2、执行语句 3、定义变量 -只定义变量 declare 变量名 数据类型; --定义变量并赋值 declare 变量名 数据类型:赋值; 示例：
--写了才会输出 set serverout on; --定义变量price并赋值，注意不是在语句块里面定义 declare price number:=100; --开始语句 begin --这里面开始写语句块 dbms_output.put_line('Hello'||price); --注意&#34; ; &#34;不要完了 --控制语句结束 end; --在对话框执行时，需要输入/ 注意：可以一次定义多个变量，不用每次都写declare。
示例：
set serverout on; --定义多个变量 declare price number:=100; productName varchar(20):='notebook'; begin -- 凭借符号|| dbms_output.put_line(price || productName); end; 4、赋值 定义变量并赋值
--定义变量price并赋值100，注意不是在语句块里面定义 declare price number:=100; 5、查询结果赋值 into：将查询结果赋值给定义的变量"><meta property="og:title" content><meta property="og:description" content="一、Oracle控制语句 1、编写语句 --写了才会输出 set serverout on; --开始语句 begin --这里面开始写语句块 dbms_output.put_line('Hello'); --注意&#34; ; &#34;不要完了 --控制语句结束 end; --在对话框执行时，需要输入/ 2、执行语句 3、定义变量 -只定义变量 declare 变量名 数据类型; --定义变量并赋值 declare 变量名 数据类型:赋值; 示例：
--写了才会输出 set serverout on; --定义变量price并赋值，注意不是在语句块里面定义 declare price number:=100; --开始语句 begin --这里面开始写语句块 dbms_output.put_line('Hello'||price); --注意&#34; ; &#34;不要完了 --控制语句结束 end; --在对话框执行时，需要输入/ 注意：可以一次定义多个变量，不用每次都写declare。
示例：
set serverout on; --定义多个变量 declare price number:=100; productName varchar(20):='notebook'; begin -- 凭借符号|| dbms_output.put_line(price || productName); end; 4、赋值 定义变量并赋值
--定义变量price并赋值100，注意不是在语句块里面定义 declare price number:=100; 5、查询结果赋值 into：将查询结果赋值给定义的变量"><meta property="og:type" content="article"><meta property="og:url" content="https://willxwu.github.io/posts/oracle%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5/"><meta property="article:section" content="posts"></head><body><header class=app-header><a href=https://willxwu.github.io/><img class=app-header-avatar src=/avatar.jpg alt="John Doe"></a><h1>willxwu</h1><nav class=app-header-menu><a class=app-header-menu-item href=/about/>about</a>
-
<a class=app-header-menu-item href=/>home</a>
-
<a class=app-header-menu-item href=/link/>link</a>
-
<a class=app-header-menu-item href=/tags/>tags</a></nav><p>I write code and I take care about my privacy // Co-founder @ Owaka // Golang lover // Open source enthusiast</p><div class=app-header-social><a target=_blank href=https://github.com/willxwu rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a target=_blank href=https://twitter.com/willxwu rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter"><title>twitter</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></div></header><main class=app-container><article class=post><header class=post-header><h1 class=post-title></h1><div class=post-meta><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Jan 1, 0001</div><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>2 min read</div></div></header><div class=post-content><h1 id=一oracle控制语句>一、Oracle控制语句</h1><h1 id=1编写语句>1、编写语句</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>--写了才会输出
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>set</span> serverout <span style=color:#66d9ef>on</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>--开始语句
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>--这里面开始写语句块
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>dbms_output.put_line(<span style=color:#e6db74>&#39;Hello&#39;</span>); <span style=color:#75715e>--注意&#34; ; &#34;不要完了
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>--控制语句结束  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>end</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>--在对话框执行时，需要输入/
</span></span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212052038708.png alt=image-20221205203804619></p><h2 id=2执行语句>2、执行语句</h2><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212052040319.png alt=image-20221205204046263></p><h2 id=3定义变量>3、定义变量</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>-</span><span style=color:#960050;background-color:#1e0010>只定义变量</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>declare</span> <span style=color:#960050;background-color:#1e0010>变量名</span>  <span style=color:#960050;background-color:#1e0010>数据类型</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>--定义变量并赋值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>declare</span> <span style=color:#960050;background-color:#1e0010>变量名</span>  <span style=color:#960050;background-color:#1e0010>数据类型</span>:<span style=color:#960050;background-color:#1e0010>赋值</span>;
</span></span></code></pre></div><p>示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>--写了才会输出
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>set</span> serverout <span style=color:#66d9ef>on</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>--定义变量price并赋值，注意不是在语句块里面定义
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>declare</span> price number:<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>--开始语句
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>--这里面开始写语句块
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>dbms_output.put_line(<span style=color:#e6db74>&#39;Hello&#39;</span><span style=color:#f92672>||</span>price); <span style=color:#75715e>--注意&#34; ; &#34;不要完了
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>--控制语句结束  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>end</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>--在对话框执行时，需要输入/
</span></span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212052045821.png alt=image-20221205204518761></p><p><strong>注意：可以一次定义多个变量，不用每次都写declare。</strong></p><p>示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>set</span> serverout <span style=color:#66d9ef>on</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>--定义多个变量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>declare</span> price number:<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>;
</span></span><span style=display:flex><span>        productName varchar(<span style=color:#ae81ff>20</span>):<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;notebook&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>-- 凭借符号|| 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  dbms_output.put_line(price <span style=color:#f92672>||</span> productName);
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>;
</span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212052054885.png alt=image-20221205205445823></p><h2 id=4赋值>4、赋值</h2><p><strong>定义变量并赋值</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>--定义变量price并赋值100，注意不是在语句块里面定义
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>declare</span> price number:<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>;
</span></span></code></pre></div><h2 id=5查询结果赋值>5、查询结果赋值</h2><p><strong>into：将查询结果赋值给定义的变量</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#960050;background-color:#1e0010>查询字段</span><span style=color:#ae81ff>1</span>,<span style=color:#960050;background-color:#1e0010>查询字段</span><span style=color:#ae81ff>2</span> <span style=color:#66d9ef>into</span> <span style=color:#960050;background-color:#1e0010>赋值给定义的变量</span><span style=color:#ae81ff>1</span>,<span style=color:#960050;background-color:#1e0010>赋值给定义的变量</span><span style=color:#ae81ff>1</span> <span style=color:#66d9ef>from</span> t_book <span style=color:#66d9ef>where</span> id<span style=color:#f92672>=</span>bs_id;
</span></span></code></pre></div><p>示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>set</span> serverout <span style=color:#66d9ef>on</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>declare</span> count_books number;
</span></span><span style=display:flex><span><span style=color:#66d9ef>begin</span> 
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>select</span> <span style=color:#66d9ef>count</span>(<span style=color:#f92672>*</span>) <span style=color:#66d9ef>into</span> count_books <span style=color:#66d9ef>from</span> t_book;
</span></span><span style=display:flex><span>  dbms_output.put_line(count_books);
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>;
</span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212052111594.png alt=image-20221205211125531></p><p>定义多个变量查询结果赋值：直接有都好隔开。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> id,price <span style=color:#66d9ef>into</span> new_id,max_price <span style=color:#66d9ef>from</span> t_book <span style=color:#66d9ef>where</span> id<span style=color:#f92672>=</span>bs_id;
</span></span></code></pre></div><h2 id=6拼接>6、拼接</h2><p>拼接符号||</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>set</span> serverout <span style=color:#66d9ef>on</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>-- 凭借符号|| 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  dbms_output.put_line(<span style=color:#e6db74>&#39;Hello&#39;</span> <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;word&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>;
</span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212052049809.png alt=image-20221205204906756></p><h1 id=二控制语句>二、控制语句</h1><p><strong>注意：都是写在语句块里面。</strong></p><h2 id=1普通-if条件语句>1、普通-if条件语句</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#960050;background-color:#1e0010>条件</span> <span style=color:#66d9ef>then</span> 
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>条件成立逻辑</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>不成立逻辑</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>end</span> <span style=color:#66d9ef>if</span>;
</span></span></code></pre></div><p>注意：end if；</p><p>示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>set</span> serverout <span style=color:#66d9ef>on</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>declare</span> count_books number;
</span></span><span style=display:flex><span><span style=color:#66d9ef>begin</span> 
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>select</span> <span style=color:#66d9ef>count</span>(<span style=color:#f92672>*</span>) <span style=color:#66d9ef>into</span> count_books <span style=color:#66d9ef>from</span> t_book;
</span></span><span style=display:flex><span>  dbms_output.put_line(count_books);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> count_books <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>2</span> <span style=color:#66d9ef>then</span> 
</span></span><span style=display:flex><span>    dbms_output.put_line(<span style=color:#e6db74>&#39;总记录数大于2&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>      dbms_output.put_line(<span style=color:#e6db74>&#39;总记录数不大于2&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>end</span> <span style=color:#66d9ef>if</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>;
</span></span></code></pre></div><p>输出结果：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212052228072.png alt=image-20221205222857003></p><h2 id=2复杂-else-if>2、复杂-else-if</h2><p>示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>set</span> serverout <span style=color:#66d9ef>on</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>declare</span> count_books number;
</span></span><span style=display:flex><span><span style=color:#66d9ef>begin</span> 
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>select</span> <span style=color:#66d9ef>count</span>(<span style=color:#f92672>*</span>) <span style=color:#66d9ef>into</span> count_books <span style=color:#66d9ef>from</span> t_book;
</span></span><span style=display:flex><span>  dbms_output.put_line(count_books);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> count_books <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>then</span> dbms_output.put_line(<span style=color:#e6db74>&#39;总记录数等于1&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> count_books <span style=color:#f92672>&gt;</span><span style=color:#ae81ff>2</span> <span style=color:#66d9ef>then</span> dbms_output.put_line(<span style=color:#e6db74>&#39;总记录数大于2&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> dbms_output.put_line(<span style=color:#e6db74>&#39;总记录数为0&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>end</span> <span style=color:#66d9ef>if</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>end</span> <span style=color:#66d9ef>if</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>;
</span></span></code></pre></div><p><strong>注意: 有多少个if，就必须要有多少个end if。</strong></p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212052238144.png alt=image-20221205223824089></p><h1 id=三流程控制>三、流程控制</h1><h2 id=1case-when-then>1、case when then</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>  <span style=color:#66d9ef>case</span> <span style=color:#960050;background-color:#1e0010>判断值</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>when</span> <span style=color:#960050;background-color:#1e0010>判断值等与值</span><span style=color:#ae81ff>1</span> <span style=color:#66d9ef>then</span> <span style=color:#ae81ff>1</span><span style=color:#960050;background-color:#1e0010>满足时成立时逻辑</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>when</span> <span style=color:#960050;background-color:#1e0010>判断值等与值</span><span style=color:#ae81ff>2</span> <span style=color:#66d9ef>then</span> <span style=color:#ae81ff>1</span><span style=color:#960050;background-color:#1e0010>满足时成立时逻辑</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>when</span> <span style=color:#960050;background-color:#1e0010>判断值等与值</span><span style=color:#ae81ff>3</span> <span style=color:#66d9ef>then</span> <span style=color:#ae81ff>1</span><span style=color:#960050;background-color:#1e0010>满足时成立时逻辑</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#960050;background-color:#1e0010>都不满足时逻辑</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span> <span style=color:#66d9ef>case</span>;
</span></span></code></pre></div><p><strong>注意：不要忘记end case;</strong></p><p>示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>set</span> serverout <span style=color:#66d9ef>on</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>declare</span> count_books number;
</span></span><span style=display:flex><span><span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>select</span> <span style=color:#66d9ef>count</span>(<span style=color:#f92672>*</span>) <span style=color:#66d9ef>into</span> count_books <span style=color:#66d9ef>from</span> t_book;
</span></span><span style=display:flex><span>  dbms_output.put_line(<span style=color:#e6db74>&#39;总记录数=&#39;</span> <span style=color:#f92672>||</span> count_books);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>case</span> count_books
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>when</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>then</span> dbms_output.put_line(<span style=color:#e6db74>&#39;有1条记录&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>when</span> <span style=color:#ae81ff>2</span> <span style=color:#66d9ef>then</span> dbms_output.put_line(<span style=color:#e6db74>&#39;有2条记录&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>when</span> <span style=color:#ae81ff>2</span> <span style=color:#66d9ef>then</span> dbms_output.put_line(<span style=color:#e6db74>&#39;有3条记录&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> dbms_output.put_line(<span style=color:#e6db74>&#39;都不满足条件&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span> <span style=color:#66d9ef>case</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>;
</span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212052247007.png alt=image-20221205224750943></p><h1 id=四循环>四、循环</h1><h2 id=1无条件循环-loop>1、无条件循环-loop</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>  loop 
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>跳出循环控制，不然一直循环；</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>要操作的逻辑；</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span> loop;
</span></span></code></pre></div><p>示例：查询表中从id为2的书的价格，当大于id大于4时，跳出无线循环。</p><p>原始表数据：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212052319440.png alt=image-20221205231947384></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>set</span> serverout <span style=color:#66d9ef>on</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>declare</span> bs_id number:<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>        max_price number;
</span></span><span style=display:flex><span>        new_id number;
</span></span><span style=display:flex><span><span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>  loop 
</span></span><span style=display:flex><span>   <span style=color:#75715e>--跳出无线循环的条件，exit后面必须要有分号。if必须要用endif
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span>(bs_id <span style=color:#f92672>&gt;</span><span style=color:#ae81ff>4</span>) <span style=color:#66d9ef>then</span> 
</span></span><span style=display:flex><span>    exit;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span> <span style=color:#66d9ef>if</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>select</span> id,price <span style=color:#66d9ef>into</span> new_id,max_price <span style=color:#66d9ef>from</span> t_book <span style=color:#66d9ef>where</span> id<span style=color:#f92672>=</span>bs_id;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    dbms_output.put_line(<span style=color:#e6db74>&#39;书名ID为：&#39;</span><span style=color:#f92672>||</span> new_id <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;的书价格为：&#39;</span> <span style=color:#f92672>||</span> max_price);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    bs_id:<span style=color:#f92672>=</span>bs_id<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span> loop;
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>;
</span></span></code></pre></div><p><strong>注意：</strong></p><p><strong>1、必须要有跳出无线循环的条件(开关)</strong></p><p><strong>2、exit跳出语句后面必须要有分号。</strong></p><p><strong>3、if必须要用end if。</strong></p><p><strong>4、loop 必须要用end loop</strong></p><p><strong>5、注意条件要增加如上的 bs_id:=bs_id+1;</strong></p><p>输出结果：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212052320333.png alt=image-20221205232054264></p><h2 id=2while循环>2、while循环</h2><p>格式:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>while <span style=color:#960050;background-color:#1e0010>条件</span>  <span style=color:#960050;background-color:#1e0010>满足条件执行逻辑。</span>
</span></span></code></pre></div><p>示例：输出ID冲2开始，小于4的书籍信息。</p><p>原始表数据：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212052335979.png alt=image-20221205233550936></p><p>编写sql：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>set</span> serverout <span style=color:#66d9ef>on</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>declare</span> bs_id number:<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>        b_price number;
</span></span><span style=display:flex><span>        book_Name varchar(<span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  while (bs_id) <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>4</span> loop
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>select</span> bookName,price <span style=color:#66d9ef>into</span> book_Name,b_price <span style=color:#66d9ef>from</span> t_book <span style=color:#66d9ef>where</span> id<span style=color:#f92672>=</span>bs_id;
</span></span><span style=display:flex><span>    dbms_output.put_line(<span style=color:#e6db74>&#39;ID=&#39;</span> <span style=color:#f92672>||</span> bs_id <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;书名：&#39;</span> <span style=color:#f92672>||</span> book_Name <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;价格：&#39;</span> <span style=color:#f92672>||</span> b_price);
</span></span><span style=display:flex><span>    bs_id:<span style=color:#f92672>=</span>bs_id<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span> loop;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>;
</span></span></code></pre></div><p><strong>注意：循环条件，不然会导致死循环</strong></p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212052335525.png alt=image-20221205233517454></p><p><strong>注意：while与loop的区别是，loop需要我们手动写exit;跳出循环语句，而while通过while条件来控制循环。</strong></p><h2 id=3for循环>3、for循环</h2><p>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>for</span> <span style=color:#960050;background-color:#1e0010>循环参数</span> <span style=color:#66d9ef>in</span> <span style=color:#960050;background-color:#1e0010>循环值</span> loop
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>其它操作逻辑；</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span> loop;
</span></span></code></pre></div><p>代码示例：输出id从2到4的书籍信息。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>set</span> serverout <span style=color:#66d9ef>on</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>declare</span> b_price number;
</span></span><span style=display:flex><span>        book_Name varchar(<span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> bs_id <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>2</span>..<span style=color:#ae81ff>4</span> loop
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>select</span> bookName,price <span style=color:#66d9ef>into</span> book_Name,b_price <span style=color:#66d9ef>from</span> t_book <span style=color:#66d9ef>where</span> id<span style=color:#f92672>=</span>bs_id;
</span></span><span style=display:flex><span>    dbms_output.put_line(<span style=color:#e6db74>&#39;ID=&#39;</span> <span style=color:#f92672>||</span> bs_id <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;书名：&#39;</span> <span style=color:#f92672>||</span> book_Name <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;价格：&#39;</span> <span style=color:#f92672>||</span> b_price);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span> loop;
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>;
</span></span></code></pre></div><p><strong>注意：for后面的参数值从多少到多少是2个.</strong></p><p>输出结果：</p><p><img src=https://cdn.jsdelivr.net/gh/willxwu/CDN@main/images/202212052348219.png alt=image-20221205234805156></p></div><div class=post-footer></div></article></main></body></html>